<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Vue3 | JoeGoodyLv</title><meta name="keywords" content="前端,Vue"><meta name="author" content="JoeGoodyLv"><meta name="copyright" content="JoeGoodyLv"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vue3基础">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3">
<meta property="og:url" content="https://gagelv.github.io/hexo-blog/2023/03/03/Vue/index.html">
<meta property="og:site_name" content="JoeGoodyLv">
<meta property="og:description" content="Vue3基础">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://w.wallhaven.cc/full/ex/wallhaven-ex3ozw.jpg">
<meta property="article:published_time" content="2023-03-03T06:09:40.000Z">
<meta property="article:modified_time" content="2023-03-03T05:40:04.598Z">
<meta property="article:author" content="JoeGoodyLv">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://w.wallhaven.cc/full/ex/wallhaven-ex3ozw.jpg"><link rel="shortcut icon" href="/hexo-blog/img/favicon1.png"><link rel="canonical" href="https://gagelv.github.io/hexo-blog/2023/03/03/Vue/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/hexo-blog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/hexo-blog/',
  algolia: undefined,
  localSearch: {"path":"/hexo-blog/search.json","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue3',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-03 13:40:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/hexo-blog/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/hexo-blog/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/hexo-blog/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/hexo-blog/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/hexo-blog/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://w.wallhaven.cc/full/ex/wallhaven-ex3ozw.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/hexo-blog/">JoeGoodyLv</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/hexo-blog/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/hexo-blog/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Vue3</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-03T06:09:40.000Z" title="发表于 2023-03-03 14:09:40">2023-03-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-03T05:40:04.598Z" title="更新于 2023-03-03 13:40:04">2023-03-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/hexo-blog/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">15.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>74分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Vue3"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>Vue3</h1>
<blockquote>
<div class="timeline  pink"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>更新时间线</p>
</div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2023.03.03</p>
</div></div><div class='timeline-item-content'><blockquote>
<p>第一次提交</p>
</blockquote>
</div></div></div>
</blockquote>
<h2 id="1-简介">1 简介</h2>
<blockquote>
<p>Node.js；VsCode+VsCode扩展Volar；浏览器调试工具Vue.js devtools</p>
</blockquote>
<blockquote>
<p><code>Vue</code>是一款用于构建用户界面的<code>JavaScript</code> 框架；它基于标准<code>HTML</code>、<code>CSS</code> 和<code>JavaScript</code> 构建，并提供了一套声明式的、组件化的编程模型，帮助你事效地开发用户界面。</p>
</blockquote>
<h3 id="1-1-MVVM（Model，View，ViewModel）">1.1 MVVM（Model，View，ViewModel）</h3>
<p><code>MVVM</code>指的是<code>Model</code>，<code>View</code>和<code>ViewModel</code><br>
●<code>Model</code> ：页面渲染用到的数据源。<br>
●<code>View</code> ：页面所渲染的<code>DOM</code>结构。<br>
●<code>ViewModel</code> ：表示<code>vue</code>的实例。</p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340790.png" alt="image-20230302105615927"></p>
<h2 id="2-创建单页面应用程序">2 创建单页面应用程序</h2>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340792.png" alt="image-20230302105743440"></p>
<p>脚本标签，视图标签，样式标签</p>
<p>选项式API，组合式API</p>
<h2 id="3-响应式数据">3 响应式数据</h2>
<h3 id="3-1-选项式API的响应式数据">3.1 选项式API的响应式数据</h3>
<ol>
<li><code>data</code>声明组件的响应式状态</li>
<li><code>this</code>组件实例</li>
</ol>
<h3 id="3-2-组合式API的响应式数据">3.2 组合式API的响应式数据</h3>
<ol>
<li>
<p>在组合式API中直接声明普通变量的数据源，不具备响应式数据。</p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340793.png" alt="image-20230219142613684"></p>
</li>
</ol>
<h4 id="3-2-1-reactive-函数">3.2.1 <code>reactive()</code>函数</h4>
<ul>
<li>
<p><code>reactive()</code>函数只对对象类型（对象，数组，<code>Map</code>，<code>Set</code>）有效，对原始类型（<code>string</code>，<code>number</code>，<code>boolean</code>）无效。</p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340794.png" alt="image-20230219143249234"></p>
</li>
</ul>
<h4 id="3-2-2-ref-函数">3.2.2 <code>ref()</code>函数</h4>
<ul>
<li>
<p>可创建任何类型的响应式数据，获取时需要通过<code>。value</code>来进行获取。</p>
</li>
<li>
<p>当值为对象类型时，会用<code>reactive()</code>自动转换它的<code>.value</code>。</p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340795.png" alt="image-20230219144135005"></p>
</li>
</ul>
<h2 id="4-模板语法">4 模板语法</h2>
<h3 id="4-1-内容渲染指令">4.1 内容渲染指令</h3>
<h4 id="4-1-1-v-text">4.1.1 <code>v-text</code></h4>
<ul>
<li>
<p>将数据采用纯文本形式填充其空元素中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 脚本标签 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let student = reactive(&#123;</span><br><span class="line">    name: &#x27;Jack&#x27;,</span><br><span class="line">    desc: &#x27;&lt;h3&gt;我来自中国！&lt;/h3&gt;&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 视图标签 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-text=&quot;student.name&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- v-text：以纯文本的方式显示数据 --&gt;</span><br><span class="line">    &lt;div v-text=&quot;student.desc&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- div不是空元素，会报错 --&gt;</span><br><span class="line">&lt;!-- &lt;div v-text=&quot;student.desc&quot;&gt;这是原始div数据&lt;/div&gt; --&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="4-1-2-v-html">4.1.2 <code>v-html</code></h4>
<ul>
<li>
<p>将数据以<code>HTML</code>语法填充其空元素中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 脚本标签 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let student = reactive(&#123;</span><br><span class="line">    name: &#x27;Jack&#x27;,</span><br><span class="line">    desc: &#x27;&lt;h3&gt;我来自中国！&lt;/h3&gt;&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 视图标签 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-html=&quot;student.name&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- v-html：以html语法显示数据 --&gt;</span><br><span class="line">    &lt;div v-html=&quot;student.desc&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="4-1-3-swig￼64-插值表达式">4.1.3 <code>&#123;&#123;&#125;&#125;</code>插值表达式</h4>
<ul>
<li>
<p>在元素中的某一位置采用纯文本方式渲染数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 脚本标签 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let student = reactive(&#123;</span><br><span class="line">    name: &#x27;Jack&#x27;,</span><br><span class="line">    desc: &#x27;&lt;h3&gt;我来自中国！&lt;/h3&gt;&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 视图标签 --&gt;</span><br><span class="line">&lt;template&gt;&lt;!-- 插值表达式：在元素中的某一位置采用纯文本方式渲染数据 --&gt;</span><br><span class="line">    &lt;div&gt;这是一个div元素，&#123;&#123; student.name &#125;&#125;，&#123;&#123; student.desc &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-2-双向绑定指令">4.2 双向绑定指令</h3>
<h4 id="4-2-1-v-model">4.2.1 <code>v-model</code></h4>
<ul>
<li>
<p><code>v-model</code>双向绑定数据指令，视图数据和数据源同步</p>
</li>
<li>
<p>一般情况下用在表单元素中：</p>
<ul>
<li>文本类型的<code>&lt;input&gt;</code>和<code>&lt;textarea&gt;</code>元素会绑定<code>value</code>属性并监听<code>input</code>事件；</li>
<li><code>&lt;input type=&quot;checkbox&quot;&gt;</code> 和<code>&lt;input type=&quot;radio&quot;&gt;</code>会绑定<code>checked</code>属性并监听<code>change</code>事件；</li>
<li><code>&lt;select&gt;</code>会绑定<code>value</code>属性并监听<code>change</code>事件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 脚本标签 --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        inputText: &#x27;ABC&#x27;,</span><br><span class="line">        message: &#x27;dvdvvv&#x27;,</span><br><span class="line">        open: true,</span><br><span class="line">        determine: false,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 视图标签 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;!-- 单行文本框 --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;inputText&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- 多行文本框 --&gt;</span><br><span class="line">    &lt;textarea v-model=&quot;message&quot;&gt;&lt;/textarea&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- 默认情况下，复选框的值：true/false --&gt;</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; v-model=&quot;open&quot;&gt;灯</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- 自定义复选框，true-value/false-value --&gt;</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; true-value=&quot;确定&quot; false-value=&quot;不确定&quot; v-model=&quot;determine&quot;&gt;是否确定</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="4-2-2-v-model的修饰符">4.2.2 <code>v-model</code>的修饰符</h4>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.number</code></td>
<td>自动将用户的输入值转为数值类型</td>
<td><code>&lt;input v-model.number=&quot;age&quot;&gt;</code></td>
</tr>
<tr>
<td><code>.trim</code></td>
<td>自动过滤用户输入的首尾空白字符</td>
<td><code>&lt;input v-model.trim=&quot;msg&quot;&gt;</code></td>
</tr>
<tr>
<td><code>.lazy</code></td>
<td>在&quot;change&quot;时而非&quot;input&quot;时更新(失去焦点时触发)</td>
<td><code>&lt;input v-model.lazy=&quot;msg&quot;&gt;</code></td>
</tr>
</tbody>
</table>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340796.png" alt="image-20230219155304307"></p>
</li>
</ul>
<h3 id="4-3-属性绑定指令">4.3 属性绑定指令</h3>
<ul>
<li>
<p><code>v-bind:</code>：响应式地绑定一个元素属性</p>
</li>
<li>
<p>如果绑定的值为<code>null</code>或<code>undefined</code>，那么该属性将会从渲染的元素上移除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 脚本标签 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">let picture = ref(&#123;</span><br><span class="line">    width: 200,</span><br><span class="line">    src: &#x27;https://w.wallhaven.cc/full/l8/wallhaven-l83o92.jpg&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 视图标签 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- v-bind: 属性绑定指令，想让属性有一个响应式数据 --&gt;</span><br><span class="line">    &lt;img v-bind:src=&quot;picture.src&quot; v-bind:width=&quot;picture.width&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- 简写语法 --&gt;</span><br><span class="line">    &lt;img :src=&quot;picture.src&quot; :width=&quot;picture.width&quot;&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;hr&gt;   </span><br><span class="line">    &lt;!-- 如果将属性绑定的数据源设置成null或undefined，会将该属性移除 --&gt;</span><br><span class="line">    &lt;button @click=&quot;picture.width = null&quot;&gt;&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="4-3-1-动态绑定多个属性值">4.3.1 动态绑定多个属性值</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let attr = reactive(&#123;</span><br><span class="line">    class: &#x27;error&#x27;,</span><br><span class="line">    id: &#x27;borderblue&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!-- 直接使用v-bind来为元素绑定多个属性及其值 --&gt;</span><br><span class="line">    &lt;button v-bind=&quot;attr&quot;&gt;我是一个普通按钮&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.error &#123;</span><br><span class="line">    background-color: rgb(116, 75, 75);</span><br><span class="line">    color: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.borderblue &#123;</span><br><span class="line">    border: 2px solid rgb(100, 75, 116);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h4 id="4-3-2-绑定class和style属性">4.3.2 绑定<code>class</code>和<code>style</code>属性</h4>
<ul>
<li><code>class</code>绑定数组和对象</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let btnClassObject = reactive(&#123;</span><br><span class="line">    error: false,</span><br><span class="line">    flat: false</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; v-model=&quot;btnClassObject.error&quot;&gt;主题</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; v-model=&quot;btnClassObject.flat&quot;&gt;阴影</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;button :class=&quot;btnClassObject&quot;&gt;我是一个普通按钮&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">button &#123;</span><br><span class="line">    border: none;</span><br><span class="line">    padding: 15px 20px;</span><br><span class="line">    background-color: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.error &#123;</span><br><span class="line">    background-color: rgb(155, 35, 35);</span><br><span class="line">    color: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.flat &#123;</span><br><span class="line">    border: 0 0 8px gray;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>style</code>绑定数组和对象</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let btnTheme = ref(&#123;</span><br><span class="line">    backgroundColor: &#x27;#FF0000&#x27;,//背景色</span><br><span class="line">    color: &#x27;#000000&#x27; //文本色</span><br><span class="line">&#125;)</span><br><span class="line">let backColor = ref(&#x27;#0000FF&#x27;)//背景色</span><br><span class="line">let textColor = ref(&#x27;#000000&#x27;)//文本色</span><br><span class="line">let borRadius = ref(20)//边框圆角</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    背景色：&lt;input type=&quot;color&quot; v-model=&quot;btnTheme.backgroundColor&quot;&gt;</span><br><span class="line">    文本色：&lt;input type=&quot;color&quot; v-model=&quot;btnTheme.color&quot;&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- style: 可以直接绑定对象数据源，但是对象数据源的属性名作为样式属性（注意命名） --&gt;</span><br><span class="line">    &lt;button :style=&quot;btnTheme&quot;&gt;我是一个普通按钮&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    背景色：&lt;input type=&quot;color&quot; v-model=&quot;backColor&quot;&gt;</span><br><span class="line">    文本色：&lt;input type=&quot;color&quot; v-model=&quot;textColor&quot;&gt;</span><br><span class="line">    边框圆角：&lt;input type=&quot;range&quot; min=&quot;0&quot; max=&quot;20&quot; v-model=&quot;borRadius&quot;&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- 可以传入对象 --&gt;</span><br><span class="line">    &lt;button :style=&quot;&#123;</span><br><span class="line">        backgroundColor: backColor,</span><br><span class="line">        color: textColor,</span><br><span class="line">        &#x27;border-radius&#x27;: borRadius + &#x27;px&#x27;</span><br><span class="line">    &#125;&quot;&gt;我是一个普通按钮&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">button &#123;</span><br><span class="line">    border: none;</span><br><span class="line">    padding: 15px 20px;</span><br><span class="line">    background-color: blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let btnTheme = ref([</span><br><span class="line">    &#123;</span><br><span class="line">        backgroundColor: &#x27;#FF0000&#x27;,//背景色</span><br><span class="line">        color: &#x27;#FFFFFF&#x27; //文本色</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        borderRadius: 0</span><br><span class="line">    &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    背景色：&lt;input type=&quot;color&quot; v-model=&quot;btnTheme[0].backgroundColor&quot;&gt;</span><br><span class="line">    文本色：&lt;input type=&quot;color&quot; v-model=&quot;btnTheme[0].color&quot;&gt;</span><br><span class="line">    边框圆角：&lt;input type=&quot;checkbox&quot; true-value=&quot;10px&quot; false-value=&quot;0&quot; v-model=&quot;btnTheme[1].borderRadius&quot;&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- style: 绑定数组 --&gt;</span><br><span class="line">    &lt;button :style=&quot;btnTheme&quot;&gt;我是一个普通按钮&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">button &#123;</span><br><span class="line">    border: none;</span><br><span class="line">    padding: 15px 20px;</span><br><span class="line">    background-color: blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="4-4-条件渲染指令">4.4 条件渲染指令</h3>
<h4 id="4-4-1-v-if-v-else-if-v-else">4.4.1 <code>v-if</code>, <code>v-else-if</code>,<code>v-else</code></h4>
<ul>
<li>为<code>true</code>才渲染</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let isShow = ref(false)</span><br><span class="line">let age = ref(20)</span><br><span class="line">let week = ref(3)//星期</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    是否显示：&lt;input type=&quot;checkbox&quot; v-model=&quot;isShow&quot;&gt;</span><br><span class="line">    &lt;h3 v-if=&quot;isShow&quot;&gt;这是一个普通的标题标签&lt;/h3&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    年龄&#123;&#123; age &#125;&#125;: &lt;input type=&quot;range&quot; min=&quot;0&quot; max=&quot;100&quot; v-model=&quot;age&quot;&gt;</span><br><span class="line">    &lt;h3 v-if=&quot;age &lt; 18&quot;&gt;未成年&lt;/h3&gt;</span><br><span class="line">    &lt;h3 v-else-if=&quot;age &lt; 35&quot;&gt;青年&lt;/h3&gt;</span><br><span class="line">    &lt;h3 v-else-if=&quot;age &lt; 50&quot;&gt;中年&lt;/h3&gt;</span><br><span class="line">    &lt;h3 v-else&gt;老年&lt;/h3&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 可以配合template使用，template元素不渲染 --&gt;</span><br><span class="line">    星期&#123;&#123; week &#125;&#125;：&lt;input type=&quot;range&quot; min=&quot;1&quot; max=&quot;7&quot; v-model=&quot;week&quot;&gt;</span><br><span class="line">    &lt;template v-if=&quot;week == 1 || week == 3 || week == 5&quot;&gt;</span><br><span class="line">        &lt;h1&gt;可以游泳&lt;/h1&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template v-else&gt;</span><br><span class="line">        &lt;h1&gt;不可以游泳&lt;/h1&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="4-4-2-v-show">4.4.2 <code>v-show</code></h4>
<ul>
<li><code>false</code>也会渲染，但是不显示（样式属性：<code>display: none</code>）。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let isShow = ref(false)</span><br><span class="line">let age = ref(20)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    是否显示：&lt;input type=&quot;checkbox&quot; v-model=&quot;isShow&quot;&gt;</span><br><span class="line">    &lt;h3 v-show=&quot;isShow&quot;&gt;这是一个普通的标题标签&lt;/h3&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    年龄&#123;&#123; age &#125;&#125;: &lt;input type=&quot;range&quot; min=&quot;0&quot; max=&quot;100&quot; v-model=&quot;age&quot;&gt;</span><br><span class="line">    &lt;h3 v-show=&quot;age &lt; 18&quot;&gt;未成年&lt;/h3&gt;</span><br><span class="line">    &lt;h3 v-show=&quot;age &gt;= 18 &amp;&amp; age &lt; 35&quot;&gt;青年&lt;/h3&gt;</span><br><span class="line">    &lt;h3 v-show=&quot;age &gt;= 35 &amp;&amp; age &lt; 50&quot;&gt;中年&lt;/h3&gt;</span><br><span class="line">    &lt;h3 v-show=&quot;age &gt;= 50&quot;&gt;老年&lt;/h3&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="4-5-事件绑定指令">4.5 事件绑定指令</h3>
<ul>
<li><code>v-on:</code>(简写为<code>@</code>)监听事件，用法：<code>v-on:click=&quot;&quot;</code>或<code>@click=&quot;&quot;</code></li>
</ul>
<h4 id="4-5-1-事件修饰符">4.5.1 事件修饰符</h4>
<ul>
<li><code>.prevent</code>：阻止默认行为</li>
<li><code>.stop</code>：阻止事件冒泡</li>
<li><code>.capture</code>：使事件触发从包含这个元素的顶层开始往下触发</li>
<li><code>.once</code>：绑定了事件以后只能触发一次，第二次就不会触发</li>
<li><code>.self</code>：只当在 event.target 是当前元素自身时触发处理函数</li>
<li><code>.passive</code>：不阻止事件的默认行为</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function say(value) &#123;</span><br><span class="line">    window.alert(&#x27;你好,&#x27; + value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function passive() &#123;</span><br><span class="line">    //阻止事件默认行为</span><br><span class="line">    event.preventDefault()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- .prevent修饰符阻止了超链接的默认行为 --&gt;</span><br><span class="line">    &lt;a href=&quot;https://www.baidu.com&quot; @click.prevent=&quot;say(&#x27;BAIDU&#x27;)&quot;&gt;百度&lt;/a&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;divArea&quot; @click=&quot;say(&#x27;DIV&#x27;)&quot;&gt;</span><br><span class="line">        &lt;!-- .stop: 阻止产生冒泡事件 --&gt;</span><br><span class="line">        &lt;button @click.stop=&quot;say(&#x27;BUTTON&#x27;)&quot;&gt;冒泡按钮&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- .capture: 给元素添加一个监听器</span><br><span class="line">                   1. 当元素事件产生冒泡时，先触发的是该修饰符的元素的事件</span><br><span class="line">                   2. 如果有多个该修饰符，则由外向内依次触发 --&gt;</span><br><span class="line">    &lt;div class=&quot;divArea&quot; @click=&quot;say(&#x27;DIV-1&#x27;)&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;divArea&quot; @click.capture=&quot;say(&#x27;DIV-2&#x27;)&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;divArea&quot; @click=&quot;say(&#x27;DIV-3&#x27;)&quot;&gt;</span><br><span class="line">                &lt;button&gt;我是一个普通的按钮&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- .self：只在该元素上触发事件有效 --&gt;</span><br><span class="line">    &lt;div class=&quot;divArea&quot; @click.self=&quot;say(&#x27;DIV&#x27;)&quot;&gt;</span><br><span class="line">        &lt;button&gt;我是一个普通的按钮&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- .passive: 先执行默认行为，不考虑执行的代码中是否包含event.preventDefault() --&gt;</span><br><span class="line">    &lt;a href=&quot;https://www.baidu.com&quot; @click.passive=&quot;passive&quot;&gt;百度&lt;/a&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.divArea &#123;</span><br><span class="line">    padding: 30px;</span><br><span class="line">    border: 2px solid blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-5-2-按键修饰符">4.5.2 按键修饰符</h4>
<ul>
<li>按键别名:<code>.enter</code> 、<code>.tab</code> 、<code>.esc</code> 、<code>.space</code> 、<code>.up</code> 、<code>.down</code> 、<code>.1eft</code> 、<code>.right</code> 、<code>.delete</code> (捕获 <code>Delete</code> 和<code>Backspace</code> 两个按键)</li>
<li>系统修饰符: <code>.ctrl</code> 、<code>.alt</code> 、<code>.shift</code> 、<code>.meta</code></li>
<li>准确的修饰符: <code>.exact</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">function showMessage(message) &#123;</span><br><span class="line">    window.alert(message)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    按下了Enter键(包含)：&lt;input type=&quot;text&quot; @keydown.enter=&quot;showMessage(&#x27;你按下了enter键&#x27;)&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    按下了Shift+Enter键(包含)：&lt;input type=&quot;text&quot; @keydown.enter.shift=&quot;showMessage(&#x27;你按下了shift+enter键&#x27;)&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    按下了Shift+Enter键(唯一)：&lt;input type=&quot;text&quot; @keydown.enter.shift.exact=&quot;showMessage(&#x27;你准确按下了shift+enter键&#x27;)&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-5-3-鼠标按键修饰符">4.5.3 鼠标按键修饰符</h4>
<ul>
<li><code>.left</code>, <code>.right</code>, <code>.middle</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">function showMessage(message) &#123;</span><br><span class="line">    window.alert(message)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    按下了鼠标左键(包含)：&lt;button @mousedown.left=&quot;showMessage(&#x27;你按下了鼠标左键&#x27;)&quot;&gt;请点击鼠标按键&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    按下了鼠标中键(包含)：&lt;button @mousedown.middle=&quot;showMessage(&#x27;你按下了鼠标中键&#x27;)&quot;&gt;请点击鼠标按键&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    按下了鼠标右键(包含)：&lt;button @mousedown.right=&quot;showMessage(&#x27;你按下了鼠标右键&#x27;)&quot;&gt;请点击鼠标按键&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="4-6-列表渲染指令">4.6 列表渲染指令</h3>
<h4 id="4-6-1-v-for渲染数组">4.6.1 <code>v-for</code>渲染数组</h4>
<ul>
<li>item <code>in</code> items</li>
<li>(item, index)<code>in</code> items</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let subject = ref([</span><br><span class="line">    &#123; id: 1, name: &#x27;Vue&#x27; &#125;,</span><br><span class="line">    &#123; id: 2, name: &#x27;Java&#x27; &#125;,</span><br><span class="line">    &#123; id: 3, name: &#x27;C/C++&#x27; &#125;,</span><br><span class="line">    &#123; id: 4, name: &#x27;Python&#x27; &#125;,</span><br><span class="line">    &#123; id: 5, name: &#x27;MySQL&#x27; &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- item in items</span><br><span class="line">                    item: 当前值</span><br><span class="line">                    items:数组 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;sub in subject&quot;&gt;</span><br><span class="line">            编号：&#123;&#123; sub.id &#125;&#125; ------ 名称：&#123;&#123; sub.name &#125;&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- 解构对象 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;&#123; id, name &#125; in subject&quot;&gt;</span><br><span class="line">            编号：&#123;&#123; id &#125;&#125; ------ 名称：&#123;&#123; name &#125;&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;( sub, index ) in subject&quot;&gt;</span><br><span class="line">            编号：&#123;&#123; sub.id &#125;&#125; ------ 名称：&#123;&#123; sub.name &#125;&#125; ------ 索引：&#123;&#123; index &#125;&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-6-2-v-for渲染对象">4.6.2 <code>v-for</code>渲染对象</h4>
<ol>
<li>value <code>in</code> object</li>
<li>(value, key) <code>in</code> object</li>
<li>(value, key, index) <code>in</code> object</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let student = ref(&#123;</span><br><span class="line">    id: 1,</span><br><span class="line">    name: &#x27;张三&#x27;,</span><br><span class="line">    sex: &#x27;男&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;value in student&quot;&gt;</span><br><span class="line">            &#123;&#123; value &#125;&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;(value, key) in student&quot;&gt;</span><br><span class="line">            &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;(value, key, index) in student&quot;&gt;</span><br><span class="line">            &#123;&#123; index &#125;&#125;. &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="4-6-3-通过key管理状态">4.6.3 通过key管理状态</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let subject = ref([</span><br><span class="line">    &#123; id: 1, name: &#x27;Vue&#x27; &#125;,</span><br><span class="line">    &#123; id: 2, name: &#x27;Java&#x27; &#125;,</span><br><span class="line">    &#123; id: 3, name: &#x27;C/C++&#x27; &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">function addSubject() &#123;</span><br><span class="line">    subject.value.unshift(&#123; id: 4, name: &#x27;Python&#x27; &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;button @click.once=&quot;addSubject&quot;&gt;添加课程（数组最前面）&lt;/button&gt;</span><br><span class="line">    &lt;h3&gt;不使用key值&lt;/h3&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;sub in subject&quot;&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot;&gt;</span><br><span class="line">            &#123;&#123; sub &#125;&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;使用索引当key值&lt;/h3&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;(sub, index) in subject&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot;&gt;</span><br><span class="line">            &#123;&#123; sub &#125;&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;使用列表属性当key值，该属性必须唯一&lt;/h3&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li v-for=&quot;sub in subject&quot; :key=&quot;sub.id&quot;&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot;&gt;</span><br><span class="line">            &#123;&#123; sub &#125;&#125;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<!--2023.02.20 17:03-->
<h2 id="5-侦听器">5 侦听器</h2>
<h3 id="5-1-选项式API中的侦听器">5.1 选项式API中的侦听器</h3>
<ul>
<li><code>watch</code></li>
</ul>
<h4 id="5-1-1-函数式侦听器">5.1.1 函数式侦听器</h4>
<ul>
<li><code>watch</code>中声明的函数即为函数式侦听器，其中函数名就是要侦听的数据源。函数中的参数1为新数据值，参数2为旧数据值。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        age: 30,</span><br><span class="line">        emp: &#123;</span><br><span class="line">            name: &#x27;Jack&#x27;, //名字</span><br><span class="line">            salary: 7000  //工资</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    // 侦听器</span><br><span class="line">    watch: &#123;</span><br><span class="line">        /**</span><br><span class="line">         * 侦听age数据源是否发生变化</span><br><span class="line">         * @param &#123;*&#125; newData 新值</span><br><span class="line">         * @param &#123;*&#125; oldData 旧值</span><br><span class="line">         */</span><br><span class="line">        age(newData, oldData) &#123;</span><br><span class="line">            console.log(&#x27;newData:&#x27; + newData)</span><br><span class="line">            console.log(&#x27;oldData:&#x27; + oldData)</span><br><span class="line">        &#125;,</span><br><span class="line">        /**</span><br><span class="line">         * 侦听emp.name数据源是否发生变化</span><br><span class="line">         * (通过采用字符串路径的形式来侦听对象中的某个属性)</span><br><span class="line">         * @param &#123;*&#125; newData </span><br><span class="line">         * @param &#123;*&#125; oldData </span><br><span class="line">         */</span><br><span class="line">        &#x27;emp.name&#x27;(newData, oldData) &#123;</span><br><span class="line">            console.log(&#x27;newData:&#x27; + newData)</span><br><span class="line">            console.log(&#x27;oldData:&#x27; + oldData)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    年龄：&lt;input type=&quot;number&quot; v-model=&quot;age&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    员工的名字：&lt;input type=&quot;text&quot; v-model=&quot;emp.name&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="5-1-2-对象式侦听器">5.1.2 对象式侦听器</h4>
<ul>
<li>在<code>watch</code>选项中声明的对象即为对象式侦听器，对象名就是要侦听的数据源，其中对象里的<code>handler </code>函数为数据源发生变化后需要执行的代码块，其参数1为新数据值，参数2为旧数据值。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        age: 30,</span><br><span class="line">    &#125;),</span><br><span class="line">    // 侦听器</span><br><span class="line">    watch: &#123;</span><br><span class="line">        /**</span><br><span class="line">         * 如果age数据源发生变化，执行handler的代码片段</span><br><span class="line">         * @param &#123;*&#125; newData 新值</span><br><span class="line">         * @param &#123;*&#125; oldData 旧值</span><br><span class="line">         */</span><br><span class="line">        age: &#123;</span><br><span class="line">            handler(newData, oldData) &#123;</span><br><span class="line">                console.log(&#x27;newData:&#x27; + newData)</span><br><span class="line">                console.log(&#x27;oldData:&#x27; + oldData)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    年龄：&lt;input type=&quot;number&quot; v-model=&quot;age&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>deep</code>
<ul>
<li>默认的浅层次的侦听器，只有侦听的数据源的值发生变化时，才会触发<code>handler</code>片段，而改变侦听的数据源中的嵌套属性值并不会触发该函数。</li>
<li><code>deep:true</code>侦听所有嵌套的变更（开销很大）。</li>
<li><code>deep:true</code>，只改变对象里面的某个属性值，会触发handler函数，但是newData和oldData是相同的（都是新值）</li>
<li>只有当改变监听对象的值时，newData和OldData才不同 。</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        emp: &#123;</span><br><span class="line">            name: &#x27;Jack&#x27;, //名字</span><br><span class="line">            salary: 7000  //工资</span><br><span class="line">        &#125;,</span><br><span class="line">        student: &#123;</span><br><span class="line">            name: &#x27;Tom&#x27;,</span><br><span class="line">            age: 18</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    // 侦听器</span><br><span class="line">    watch: &#123;</span><br><span class="line">        emp: &#123;</span><br><span class="line">            // 默认的浅层次的侦听器，只有侦听的数据源的值发生变化时，才会触发handler片段，而改变侦听的数据源中的嵌套属性值并不会触发该函数。</span><br><span class="line">            handler(newData, oldData) &#123;</span><br><span class="line">                console.log(newData)</span><br><span class="line">                console.log(oldData)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        student: &#123;</span><br><span class="line">            // 深度侦听，只改变对象里面的某个属性值，会触发handler函数,但是newData和oldData是相同的</span><br><span class="line">            // 只有当改变监听对象的值时，newData和OldData才不同</span><br><span class="line">            deep: true,</span><br><span class="line">            handler(newData, oldData) &#123;</span><br><span class="line">                console.log(newData)</span><br><span class="line">                console.log(oldData)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    员工名字：&lt;input type=&quot;text&quot; v-model=&quot;emp.name&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    学生年龄：&lt;input type=&quot;number&quot; v-model=&quot;student.age&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><code>immediate</code>
<ul>
<li><code>watch</code>默认懒执行</li>
<li><code>immediate:true</code></li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        account: &#x27;Abc&#x27;,</span><br><span class="line">        student: &#123;</span><br><span class="line">            name: &#x27;Tom&#x27;,</span><br><span class="line">            age: 18</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    // 侦听器</span><br><span class="line">    watch: &#123;</span><br><span class="line">        account: &#123;</span><br><span class="line">            //默认情况下，侦听器懒执行，仅当数据源发生变化，才执行回调</span><br><span class="line">            handler(newData, oldData) &#123;</span><br><span class="line">                console.log(newData)</span><br><span class="line">                console.log(oldData)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        student: &#123;</span><br><span class="line">            deep: true,</span><br><span class="line">            immediate: true,//创建侦听器时立即执行一次该handler函数</span><br><span class="line">            handler(newData, oldData) &#123;</span><br><span class="line">                console.log(newData)</span><br><span class="line">                console.log(oldData)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    账号：&lt;input type=&quot;text&quot; v-model=&quot;account&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    学生年龄：&lt;input type=&quot;number&quot; v-model=&quot;student.age&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>flush</code>
<ul>
<li><code>flush:'post'</code></li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        account: &#x27;Abc&#x27;</span><br><span class="line">    &#125;),</span><br><span class="line">    // 侦听器</span><br><span class="line">    watch: &#123;</span><br><span class="line">        account: &#123;</span><br><span class="line">            flush: &#x27;post&#x27;,//更改回调的触发机制（Dom更新后）</span><br><span class="line">            handler(newData, oldData) &#123;</span><br><span class="line">                console.log(newData)</span><br><span class="line">                console.log(oldData)</span><br><span class="line">                //默认情况下，回调函数中访问Dom将是更新之前的状态</span><br><span class="line">                console.log(document.getElementById(&#x27;titleAccount&#x27;).innerHTML);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;h3 id=&quot;titleAccount&quot;&gt;</span><br><span class="line">        最新账号：&lt;span&gt;&#123;&#123; account &#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/h3&gt;</span><br><span class="line">    账号：&lt;input type=&quot;text&quot; v-model=&quot;account&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="5-1-3-this-watch侦听器">5.1.3 <code>this.$watch</code>侦听器</h4>
<ul>
<li>创建侦听器</li>
</ul>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340797.png" alt="image-20230221153437435"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        account: &#x27;Abc&#x27;</span><br><span class="line">    &#125;),</span><br><span class="line">    //生命周期函数，页面成功渲染后</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.$watch(&#x27;account&#x27;, (newData, oldData) =&gt; &#123;</span><br><span class="line">            console.log(newData)</span><br><span class="line">            console.log(oldData)</span><br><span class="line">        &#125;, &#123; deep: true, immediate: true &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    账号：&lt;input type=&quot;text&quot; v-model=&quot;account&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>停止侦听器
<ul>
<li>需要自行停止侦听器，这时可以调用<code>$watch()</code> API 返回的函数。</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        account: &#x27;Abc&#x27;,</span><br><span class="line">        stopAccountWatch: null //调用该函数，停止侦听数据源</span><br><span class="line">    &#125;),</span><br><span class="line">    //生命周期函数，页面成功渲染后</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.stopAccountWatch = this.$watch(&#x27;account&#x27;, (newData, oldData) =&gt; &#123;</span><br><span class="line">            console.log(newData)</span><br><span class="line">            console.log(oldData)</span><br><span class="line">        &#125;, &#123; deep: true, immediate: true &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    账号：&lt;input type=&quot;text&quot; v-model=&quot;account&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;stopAccountWatch&quot;&gt;停止侦听数据源&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-组合式API中的侦听器">5.2 组合式API中的侦听器</h3>
<ul>
<li><code>watch</code>函数或<code>watchEffect</code>函数在每次响应式状态变化时触发对应的回调函数。</li>
</ul>
<h4 id="5-2-1-watch-函数">5.2.1 <code>watch()</code>函数</h4>
<ul>
<li>创建侦听器</li>
</ul>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340798.png" alt="image-20230221154207981"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref, watch &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">let account = ref(&#x27;Abc&#x27;)</span><br><span class="line"></span><br><span class="line">const emp = reactive(&#123;</span><br><span class="line">    name: &#x27;Jack&#x27;,</span><br><span class="line">    salary: 8000</span><br><span class="line">&#125;)</span><br><span class="line">const dept = reactive(&#123;</span><br><span class="line">    id: &#x27;101&#x27;,</span><br><span class="line">    name: &#x27;销售部&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const region = reactive(&#123;</span><br><span class="line">    id: &#x27;201&#x27;,</span><br><span class="line">    name: &#x27;北美洲&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">// 侦听原始类型的数据</span><br><span class="line">watch(account, (newData, oldData) =&gt; &#123;</span><br><span class="line">    console.log(&quot;===账号新旧值===&quot;)</span><br><span class="line">    console.log(newData)</span><br><span class="line">    console.log(oldData)</span><br><span class="line">&#125;)</span><br><span class="line">// 侦听对象中的某个属性（必须提供获取该属性的函数）</span><br><span class="line">watch(() =&gt; emp.salary, (newData, oldData) =&gt; &#123;</span><br><span class="line">    console.log(&quot;===员工薪资新旧值===&quot;)</span><br><span class="line">    console.log(newData)</span><br><span class="line">    console.log(oldData)</span><br><span class="line">&#125;)</span><br><span class="line">//侦听一个对象,</span><br><span class="line">watch(emp,</span><br><span class="line">    //如果嵌套属性值发生变化，那么也会触发该回调函数，但是新旧值相等。    </span><br><span class="line">    (newData, oldData) =&gt; &#123;</span><br><span class="line">        console.log(&quot;===员工信息新旧值===&quot;)</span><br><span class="line">        console.log(newData)</span><br><span class="line">        console.log(oldData)</span><br><span class="line">    &#125;)</span><br><span class="line">//侦听一个对象(getter)</span><br><span class="line">watch(() =&gt; dept,</span><br><span class="line">    //如果嵌套属性值发生变化，默认情况下不会触发该回调函数。    </span><br><span class="line">    (newData, oldData) =&gt; &#123;</span><br><span class="line">        console.log(&quot;===部门信息新旧值===&quot;)</span><br><span class="line">        console.log(newData)</span><br><span class="line">        console.log(oldData)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">//侦听一个对象(getter)</span><br><span class="line">watch(() =&gt; region,</span><br><span class="line">    //如果嵌套属性值发生变化，配置了深度侦听，会触发该回调函数，但值相同。    </span><br><span class="line">    (newData, oldData) =&gt; &#123;</span><br><span class="line">        console.log(&quot;===区域信息新旧值===&quot;)</span><br><span class="line">        console.log(newData)</span><br><span class="line">        console.log(oldData)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; deep: true &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    账号：&lt;input type=&quot;text&quot; v-model=&quot;account&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    薪资：&lt;input type=&quot;number&quot; v-model=&quot;emp.salary&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    部门：&lt;input type=&quot;text&quot; v-model=&quot;dept.name&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    区域：&lt;input type=&quot;text&quot; v-model=&quot;region.name&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>停止侦听器：调用<code>watch()</code>API返回的函数</li>
</ul>
<h4 id="5-2-2-watchEffect-函数">5.2.2 <code>watchEffect()</code>函数</h4>
<ul>
<li><code>watchPostEffect()</code>函数：回调函数的触发机制在DOM更新之后</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref, watch, watchEffect &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">let account = ref(&#x27;Abc&#x27;)</span><br><span class="line">// 创建成功后立即执行一次</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">    //如果该数据源的值发生了变化，会重新执行该回调函数</span><br><span class="line">    console.log(account.value);</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    账号：&lt;input type=&quot;text&quot; v-model=&quot;account&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted, reactive, ref, watch, watchEffect &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">let account = ref(&#x27;Abc&#x27;)</span><br><span class="line"></span><br><span class="line">let password = ref(&#x27;123456&#x27;)</span><br><span class="line"></span><br><span class="line">//当视图渲染成功后</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">    // 侦听账号</span><br><span class="line">    watchEffect(() =&gt; &#123;</span><br><span class="line">        console.log(&#x27;--------------&#x27;);</span><br><span class="line">        console.log(account.value)</span><br><span class="line">        //默认情况下，回调触发机制，在Dom更新之前</span><br><span class="line">        console.log(document.getElementById(&#x27;titleAccount&#x27;).innerHTML)</span><br><span class="line">    &#125;),</span><br><span class="line">    // 侦听密码</span><br><span class="line">    watchEffect(() =&gt; &#123;</span><br><span class="line">        console.log(&#x27;=============&#x27;);</span><br><span class="line">        console.log(password.value)</span><br><span class="line">        //默认情况下，回调触发机制，在Dom更新之前</span><br><span class="line">        console.log(document.getElementById(&#x27;titlePassword&#x27;).innerHTML)</span><br><span class="line">    &#125;,</span><br><span class="line">    //更改回调函数的触发机制，在Dom更新之后</span><br><span class="line">    &#123; flush: &#x27;post&#x27; &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;h1 id=&quot;titleAccount&quot;&gt;账号: &lt;i&gt;&#123;&#123; account &#125;&#125;&lt;/i&gt;&lt;/h1&gt;</span><br><span class="line">    账号：&lt;input type=&quot;text&quot; v-model=&quot;account&quot;&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h1 id=&quot;titlePassword&quot;&gt;密码: &lt;i&gt;&#123;&#123; password &#125;&#125;&lt;/i&gt;&lt;/h1&gt;</span><br><span class="line">    密码&lt;input type=&quot;text&quot; v-model=&quot;password&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>停止侦听器：调用<code>watchEffect()</code>或者<code>watchPostEffect()</code>API返回的函数。</li>
</ul>
<!--2023.02.21 17:35-->
<h2 id="6-计算属性">6 计算属性</h2>
<ul>
<li>使用计算属性描述依赖响应式状态的复杂逻辑。
<ul>
<li>选项式API中，提供<code>computed</code>选项来声明计算属性。</li>
<li>组合式API中，通过<code>computed</code>回调函数返回的值来声明计算属性。</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; computed, ref &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">let age = ref(20)</span><br><span class="line"></span><br><span class="line">// 计算属性</span><br><span class="line">let ageState = computed(() =&gt; &#123;</span><br><span class="line">    if (age.value &lt; 18) &#123; return &#x27;未成年&#x27; &#125;</span><br><span class="line">    else if (age.value &lt; 35) &#123;</span><br><span class="line">        return &#x27;青年&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    else if (age.value &lt; 50) &#123;</span><br><span class="line">        return &#x27;中年&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        return &#x27;老年&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    年龄：&lt;input type=&quot;number&quot; v-model.lazy=&quot;age&quot;&gt;</span><br><span class="line">    &lt;!-- 简单的表达式 --&gt;</span><br><span class="line">    &lt;h3&gt;年龄阶段（简单）：&#123;&#123; age &lt; 18 ? &#x27;未成年&#x27; : &#x27;成年&#x27; &#125;&#125; &lt;/h3&gt;</span><br><span class="line">    &lt;!-- 计算属性 --&gt;</span><br><span class="line">    &lt;h3&gt;年龄阶段（复杂）：&#123;&#123; ageState &#125;&#125; &lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>计算属性与方法的区别
<ul>
<li>两种方式在结果上确实是完全相同的，不同之处在于计算属性值会基于其响应式依赖被缓存。</li>
<li>一个计算属性仅会在其响应式依赖更新时才重新计算。 这意味着只要所依赖的数据源不改变，无论多少次访问计算属性都会立即返回先前的计算结果，而不用重复执行<code>getter</code>函数。</li>
<li>方法调用总是会在重新渲染发生时再次执行函数。</li>
</ul>
</li>
<li>计算属性注意事项：
<ul>
<li>不要在计算属性中做异步请求或更改DOM。</li>
<li>避免直接修改计算属性值。</li>
</ul>
</li>
</ul>
<h2 id="7-组件">7 组件</h2>
<h3 id="7-1-注册组件">7.1 注册组件</h3>
<ul>
<li>一个Vue组件在使用前需要先被“注册”，这样Vue才能在染模板时找到其对应的实现；组件注册有两种方式：全局注册、局部注册。</li>
</ul>
<h4 id="7-1-1-全局注册">7.1.1 全局注册</h4>
<ul>
<li>在<code>main.js</code>中可使用<code>app.component(namg, Component)</code>注册组件的方法， 在此应用的任意组件的模板中使用。
<ul>
<li><code>name</code> ：注册的名字</li>
<li><code>Component</code> ：需要注册的组件</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">LoginVue</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Login.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// import &#x27;./assets/main.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//createApp(App).mount(&#x27;#app&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局注册组件</span></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;MLogin&#x27;</span>, <span class="title class_">LoginVue</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="7-1-2-局部注册">7.1.2 局部注册</h4>
<ul>
<li>局部注册的组件需要在使用它的父组件中显式导入，并且只能在该父组件中使用</li>
<li>在选项式API中，我们可以使用<code>components</code> 选项来局部注加组件。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script &gt;</span><br><span class="line">import LoginVue from &#x27;./components/Login.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    //注册组件选项</span><br><span class="line">    components: &#123; LoginVue &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;&lt;!-- 使用注册的组件 --&gt;</span><br><span class="line">    &lt;LoginVue /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>在组合式API中的<code>&lt;script setup&gt;</code>内，直按导入的组件就可以在模板中直接可用，无需注册。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import LoginVue from &#x27;./components/Login.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- 使用注册的组件 --&gt;</span><br><span class="line">    &lt;LoginVue /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="7-2-传递数据（父-子）">7.2 传递数据（父-&gt;子）</h3>
<ul>
<li>如果父组件向子组件进行传递数据，那么我们需要在子组件中声明<code>props</code>来接收传递数据的属性，可采用<strong>字符串数组式或对象式</strong>来声明<code>props</code>。</li>
<li>父组件向子组件传递数据，在使用组件的标签上采用属性方式传递的<code>props</code> 值，<strong>可使用<code>v-bind: </code>或<code>:</code>来绑定尾性</strong>。</li>
<li>组件中<code>props</code> 中的数据是<strong>只读</strong>的，不可直接更改，只能通过父组件进行更改。</li>
</ul>
<blockquote>
<p><strong>声明与使用</strong></p>
<ol>
<li>在选项式API中
<ul>
<li>我们可以提供<code>props</code> 选项来声明接收传递的数据</li>
<li>在JS中可使用<code>this.$props</code> 来访问声明的自定义的属性</li>
<li>在视图模板中，可直接访问<code>props</code>中声明的自定义属性</li>
</ul>
</li>
<li>在组合式API中
<ul>
<li>我们可以采用<code>defineProps</code> 宏来声明接收传递的数据</li>
<li>在JS中可使用<code>defineProps</code> 返回的对象来访问声明的自定义的属性</li>
<li>在视图模板中，可直接访问<code>defineProps</code> 中声明的自定义属性</li>
</ul>
</li>
</ol>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// defineProps声明接收父组件传递的属性值：自定义属性</span><br><span class="line">    // 数据形式：数组</span><br><span class="line">let propsData = defineProps([&#x27;title&#x27;, &#x27;error&#x27;, &#x27;flat&#x27;])</span><br><span class="line"></span><br><span class="line">// 在JS中可使用`defineProps` 返回的对象来访问声明的自定义的属性</span><br><span class="line">function showPropsData() &#123;</span><br><span class="line">    console.log(propsData)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 错误，props数据只读，不能直接修改</span><br><span class="line">function changeErrorProps() &#123;</span><br><span class="line">    propsData.error = !propsData.error</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- 在视图模板上，可直接使用props中的属性 --&gt;</span><br><span class="line">    &lt;button :class=&quot;&#123; error, flat &#125;&quot; @click=&quot;showPropsData&quot;&gt;</span><br><span class="line">        &#123;&#123; title &#125;&#125;</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">button &#123;</span><br><span class="line">    border: none;</span><br><span class="line">    padding: 12px 25px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.error &#123;</span><br><span class="line">    background-color: rgb(197, 75, 75);</span><br><span class="line">    color: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.flat &#123;</span><br><span class="line">    box-shadow: 0 0 10px grey;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340799.png" alt="image-20230222172801147"></p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340800.png" alt="image-20230222173124465"></p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340801.png" alt="image-20230222173148948"></p>
<h3 id="7-3-传递数据（子-父）">7.3 传递数据（子-&gt;父）</h3>
<p>有的时候，父组件在使用子组件时，子组件如何给父组件传值呢?</p>
<ol>
<li>子组件声明自定义的事件</li>
<li>子组件中触发自定义事件(可传值)</li>
<li>父组件使用子组件时监听对应的自定义事件，并执行父组件中的函数: (获取子组件传递的值)。</li>
</ol>
<h4 id="7-3-1-【子组件】声明组件事件">7.3.1 【子组件】声明组件事件</h4>
<ol>
<li>
<p>在选项式API中，子组件可通过<code>emits</code>选项来声明自定义的事件</p>
<ul>
<li>字符串数组式声明简单的自定义事件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--App.vue--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import StudentVue from &#x27;./components/Student.vue&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    components: &#123; StudentVue &#125;,</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        student: &#123;</span><br><span class="line">            name: &#x27;Jack&#x27;,</span><br><span class="line">            age: 18,</span><br><span class="line">            sex: &#x27;男&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    methods: &#123;</span><br><span class="line">        getNewAge(newAge) &#123;</span><br><span class="line">            console.log(&#x27;年龄新值：&#x27; + newAge)</span><br><span class="line">            this.student.age = newAge</span><br><span class="line">        &#125;,</span><br><span class="line">        getNewAgeAndName(newAge, newName) &#123;</span><br><span class="line">            this.student.age = newAge</span><br><span class="line">            this.student.name = newName</span><br><span class="line">        &#125;,</span><br><span class="line">        getNewStudent(stu) &#123;</span><br><span class="line">            this.student.age = stu.age</span><br><span class="line">            this.student.name = stu.name</span><br><span class="line">            this.student.sex = stu.sex</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &#123;&#123; student &#125;&#125;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;StudentVue @change-age=&quot;getNewAge&quot; @change-age-and-name=&quot;getNewAgeAndName&quot; @change-student=&quot;getNewStudent&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--Button.vue--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    emits: [&#x27;changeAge&#x27;, &#x27;changeAgeAndName&#x27;, &#x27;changeStudent&#x27;],</span><br><span class="line">    methods: &#123;</span><br><span class="line">        emitsEventAge() &#123;</span><br><span class="line">            //选项式通过&#x27;this.$emit&#x27;触发自定义事件</span><br><span class="line">            this.$emit(&#x27;changeAge&#x27;, 30)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;button @click=&quot;emitsEventAge&quot;&gt;更改年龄&lt;/button&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;$emit(&#x27;changeAgeAndName&#x27;, 10, &#x27;Annie&#x27;)&quot;&gt;更改年龄和名字&lt;/button&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;$emit(&#x27;changeStudent&#x27;, &#123; age: 10, name: &#x27;Annie&#x27;, sex: &#x27;女&#x27; &#125;)&quot;&gt;更改学生&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>对象式声明自定义事件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    emits: &#123;</span><br><span class="line">        changeAge: null,</span><br><span class="line">        changeAgeAndName: null,</span><br><span class="line">        changeStudent: stu =&gt; &#123;</span><br><span class="line">            if (stu.age &lt;= 0) &#123;</span><br><span class="line">                //验证失败，会有警告语句</span><br><span class="line">                return false</span><br><span class="line">            &#125;</span><br><span class="line">            return true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        emitsEventAge() &#123;</span><br><span class="line">            //选项式通过&#x27;this.$emit&#x27;触发自定义事件</span><br><span class="line">            this.$emit(&#x27;changeAge&#x27;, 30)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;button @click=&quot;emitsEventAge&quot;&gt;更改年龄&lt;/button&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;$emit(&#x27;changeAgeAndName&#x27;, 10, &#x27;Annie&#x27;)&quot;&gt;更改年龄和名字&lt;/button&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;$emit(&#x27;changeStudent&#x27;, &#123; age: 10, name: &#x27;Annie&#x27;, sex: &#x27;女&#x27; &#125;)&quot;&gt;更改学生（验证通过）&lt;/button&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;$emit(&#x27;changeStudent&#x27;, &#123; age: -10, name: &#x27;asdf&#x27;, sex: &#x27;女&#x27; &#125;)&quot;&gt;更改学生（验证失败）&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在组合式API中，子组件可通过<code>defineEmits()</code>宏来声明自定义的事件</p>
</li>
</ol>
<h4 id="7-3-2-【子组件】触发组件事件">7.3.2 【子组件】触发组件事件</h4>
<ul>
<li>选项式API：通过<code>this.$emit</code>触发自定义事件</li>
<li>组合式API：调用<code>defineEmit()</code>返回的<code>emit(event,...args)</code>函数来触发自定义事件</li>
</ul>
<h4 id="7-3-3【父组件】监听子组件自定义事件">7.3.3【父组件】监听子组件自定义事件</h4>
<h3 id="7-4-透传属性和事件">7.4 透传属性和事件</h3>
<ul>
<li>父组件在使用子组件的时候，如何&quot;透传属性和事件”给子组件呢?
<ol>
<li>透传属性和事件并没有在子组件中用<code>props</code> 和<code>emits</code> 声明</li>
<li>透传属性和事件最常见的如<code>@click</code>和<code>class</code> 、<code>id</code> 、<code>style</code>。</li>
<li>当子组件<strong>只有一个根元素</strong>时，透传属性和事件会自动添加到该根元素上：如果根元素已有<code>class</code> 或<code>style</code>属性，它会自动合并。</li>
</ol>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">import ChipVue from &#x27;./components/Chip.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- 透传的属性（style，class，title),在子组件中并没有在props声明 --&gt;</span><br><span class="line">    &lt;!-- 透传的事件（@click），没有在emit声明 --&gt;</span><br><span class="line">    &lt;ChipVue style=&quot;border: 1px solid blue;&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>禁止“透传属性和事件”</li>
</ul>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340802.png" alt="image-20230223152108697"></p>
<ul>
<li>多根元素的“透传属性和事件”
<ul>
<li>多根节点的组件并没有自动“透传属性和事件”的行为。</li>
<li>由于Vue不确定要将“透传属性和事件”透传到哪里，所以我们需要<code>v-bind=&quot;$attrs &quot;</code>来显式绑定，否则将会抛出一个运行时警告。</li>
</ul>
</li>
<li>访问“透传属性和事件”
<ol>
<li>在选项式API中，我们可通过<code>this.$attrs</code>束访问&quot;透传属性和事件”。</li>
<li>在组合式API中的<code>&lt;script setup&gt;</code> 中引入<code>useAttrs()</code>来访问一个组件的“透传属性和事件”。</li>
</ol>
</li>
</ul>
<h3 id="7-5-插槽">7.5 插槽</h3>
<ul>
<li><code>&lt;slot&gt;</code></li>
<li>具名插槽</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--App.vue--&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">import CardVue from &#x27;./components/Card.vue&#x27;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;CardVue&gt;</span><br><span class="line">        &lt;!-- 向具名插槽提供内容 --&gt;</span><br><span class="line">        &lt;template v-slot:cardTitle&gt;博客&lt;/template&gt;</span><br><span class="line">        &lt;template #cardSubTitle&gt;副标题&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">        &lt;template #cardContent=&quot;dataProps&quot;&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">                &lt;li&gt;标题：&#123;&#123; dataProps.cardBlog.title &#125;&#125;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;时间：&#123;&#123; dataProps.cardBlog.time &#125;&#125;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;作者：&#123;&#123; dataProps.cardAuthor &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 给子组件提供内容 --&gt;</span><br><span class="line">        &lt;template #default&gt;</span><br><span class="line">            &lt;button&gt;我是子组件按钮&lt;/button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/CardVue&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--Card.vue--&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">let blog = reactive(&#123;</span><br><span class="line">    title: &#x27;Java上传文件&#x27;,</span><br><span class="line">    time: &#x27;2021-12-25 15:33:25&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">let author = ref(&#x27;阿呆&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;card&quot;&gt;</span><br><span class="line">        &lt;h2 class=&quot;title&quot;&gt;</span><br><span class="line">            &lt;!-- 带有name属性的插槽：具名插槽 --&gt;</span><br><span class="line">            &lt;slot name=&quot;cardTitle&quot;&gt;卡片功能区&lt;/slot&gt;</span><br><span class="line">        &lt;/h2&gt;</span><br><span class="line">        &lt;div class=&quot;subtitle&quot;&gt;</span><br><span class="line">            &lt;slot name=&quot;cardSubTitle&quot;&gt;卡片功能区&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">            &lt;!-- 带有数据的插槽称为：作用域插槽 --&gt;</span><br><span class="line">            &lt;!-- &lt;slot&gt;插槽上的name,是一个Vue特别保留的属性,不会在作用域插槽中访问到 --&gt;</span><br><span class="line">            &lt;slot name=&quot;cardContent&quot; :cardBlog=&quot;blog&quot; :cardAuthor=&quot;author&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;action&quot;&gt;</span><br><span class="line">            &lt;!-- 定义一个插槽 --&gt;</span><br><span class="line">            &lt;!-- 插槽的默认内容，当父组件未提供任何内容时才会显示 --&gt;</span><br><span class="line">            &lt;!-- 没有name属性的插槽称为默认插槽，隐含名字：default --&gt;</span><br><span class="line">            &lt;slot&gt;卡片功能区&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.card &#123;</span><br><span class="line">    widows: 250px;</span><br><span class="line">    border: 1px solid black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.card h2,</span><br><span class="line">.card div &#123;</span><br><span class="line">    margin: 10px;</span><br><span class="line">    padding: 5px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title &#123;</span><br><span class="line">    border: 1px solid red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.subtitle &#123;</span><br><span class="line">    border: 1px solid green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.content &#123;</span><br><span class="line">    border: 1px solid blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.action &#123;</span><br><span class="line">    border: 1px solid pink;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="7-6-单文件组件CSS功能">7.6 单文件组件<code>CSS</code>功能</h3>
<h4 id="7-6-1-组件作用域scoped">7.6.1 组件作用域<code>scoped</code></h4>
<ul>
<li><code>scoped</code>属性，让下方的选择器的样式<strong>只作用在该组件上，或者子组件的根元素</strong>上。</li>
<li>该css选择器都会自动添加固定的属性选择器（<code>data-v-...</code>）</li>
</ul>
<h4 id="7-6-2-深度选择器：-deep">7.6.2 深度选择器：<code>:deep()</code></h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- scoped属性，让下方的选择器的样式只作用在该组件上，或者子组件的根元素上--&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h3 &#123;</span><br><span class="line">    border: 1px solid blue;</span><br><span class="line">&#125;</span><br><span class="line">.error &#123;</span><br><span class="line">    border: 1px solid red;</span><br><span class="line">    padding: 15px;</span><br><span class="line">&#125;</span><br><span class="line">/* 如果想让style scoped中让样式作用到子组件上，使用:deep()伪类选择器 */</span><br><span class="line">.error :deep(button) &#123;</span><br><span class="line">    border: 2px solid green;</span><br><span class="line">    padding: 8px 15px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h4 id="7-6-3-CSS中的v-bind">7.6.3 <code>CSS</code>中的<code>v-bind()</code></h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">let btnTheme = reactive(&#123;</span><br><span class="line">    backColor: &#x27;#000000&#x27;,</span><br><span class="line">    textColor: &#x27;#FFFFFF&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;button&gt;普通按钮&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line"></span><br><span class="line">    背景色：&lt;input type=&quot;color&quot; v-model=&quot;btnTheme.backColor&quot;&gt;</span><br><span class="line">    文本色：&lt;input type=&quot;color&quot; v-model=&quot;btnTheme.textColor&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">button &#123;</span><br><span class="line">    /* 使用v-bind()可以使用该组件中的数据源，并且响应式更新 */</span><br><span class="line">    /* 需要单引号包裹起来 */</span><br><span class="line">    background-color: v-bind(&#x27;btnTheme.backColor&#x27;);</span><br><span class="line">    color: v-bind(&#x27;btnTheme.textColor&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="7-7-依赖注入">7.7 依赖注入</h3>
<blockquote>
<p>App.vue -&gt; Footer.vue -&gt; DeepChild.vue</p>
</blockquote>
<img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340803.png" />
<ul>
<li>应用层可以为所有组件提供数据（<code>main.js</code>）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// import &#x27;./assets/main.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//createApp(App).mount(&#x27;#app&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 应用层为所有组件提供数据</span></span><br><span class="line">app.<span class="title function_">message</span>(<span class="string">&#x27;message&#x27;</span>, <span class="string">&#x27;Hello!&#x27;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>组合式API中，祖先组件使用<code>provide()</code>函数提供数据，孩子组件使用<code>inject()</code>函数的返回值来注入祖先组件提供的数据。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--App.vue--&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">import &#123; provide, ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">import FooterVue from &#x27;./components/Footer.vue&#x27;</span><br><span class="line"></span><br><span class="line">let app_message = ref(&#x27;星期五&#x27;)</span><br><span class="line">// 提供响应式的数据，自动和注入方保持响应式链接</span><br><span class="line">provide(&#x27;app_message&#x27;, app_message)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;area&quot; style=&quot;background-color: red;&quot;&gt;</span><br><span class="line">        &lt;h3&gt;这是 APP组件 &lt;/h3&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; v-model=&quot;app_message&quot;&gt;</span><br><span class="line">        &lt;FooterVue /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.area &#123;</span><br><span class="line">    padding: 15px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--DeepChild.vue--&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">const message = inject(&#x27;message&#x27;)//应用层提供的数据</span><br><span class="line">const app_message = inject(&#x27;app_message&#x27;)//祖先组件提供的数据</span><br><span class="line">const content = inject(&#x27;content&#x27;, &#x27;默认数据&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;area&quot; style=&quot;background-color: pink;&quot;&gt;</span><br><span class="line">        &lt;h3&gt;这是 DeepChild 组件&lt;/h3&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;应用层提供的数据：&#123;&#123; message &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;APP组件提供的数据：&#123;&#123; app_message &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; v-model=&quot;app_message&quot;&gt;</span><br><span class="line">            &lt;li&gt;祖先组件未提供数据：&#123;&#123; content &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="8-生命周期">8 生命周期</h2>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340804.png" alt="在这里插入图片描述"></p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340805.png" alt="img"></p>
<h3 id="8-1-选项式API">8.1 选项式API</h3>
<ol>
<li><code>APP.vue</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import SonVue from &#x27;./components/Son.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    components: &#123; SonVue &#125;,</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        isShow: false</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h3&gt;APP组件&lt;/h3&gt;</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; v-model=&quot;isShow&quot;&gt;是否显示子组件</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;SonVue subtitle=&quot;这是一个副标题&quot; v-if=&quot;isShow&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><code>Son.vue</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    props: [&#x27;subtitle&#x27;],</span><br><span class="line">    data: () =&gt; (&#123;</span><br><span class="line">        age: 30</span><br><span class="line">    &#125;),</span><br><span class="line">    methods: &#123;</span><br><span class="line">        showMessage() &#123;</span><br><span class="line">            console.log(&#x27;函数Hello&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 组件实例化之前</span><br><span class="line">    // 能访问props的数据</span><br><span class="line">    // 不能访问组件的实例this中的数据源和函数</span><br><span class="line">    // 不能访问组件中的视图DOM元素</span><br><span class="line"></span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">        console.log(&#x27;beforeCreate 组件实例化之前&#x27;);</span><br><span class="line">        console.log(this.$props.subtitle);</span><br><span class="line">        // console.log(this.age)</span><br><span class="line">        // this.showMessage()</span><br><span class="line">        // console.log(document.getElementById(&#x27;title&#x27;).innerHTML);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 组件实例化之后</span><br><span class="line">    // 能访问自定义属性</span><br><span class="line">    // 能访问组件的实例this中的数据源和函数</span><br><span class="line">    // 不能访问组件中的视图DOM元素</span><br><span class="line">    created() &#123;</span><br><span class="line">        console.log(&#x27;created 组件实例化之后&#x27;);</span><br><span class="line">        console.log(this.$props.subtitle);</span><br><span class="line">        console.log(this.age)</span><br><span class="line">        this.showMessage()</span><br><span class="line">        // console.log(document.getElementById(&#x27;title&#x27;).innerHTML);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 组件视图渲染之前</span><br><span class="line">    // 能访问自定义属性</span><br><span class="line">    // 能访问组件的实例this中的数据源和函数</span><br><span class="line">    // 不能访问组件中的视图DOM元素</span><br><span class="line">    beforeMount() &#123;</span><br><span class="line">        console.log(&#x27;beforeMount 组件视图渲染之前&#x27;);</span><br><span class="line">        console.log(this.$props.subtitle);</span><br><span class="line">        console.log(this.age)</span><br><span class="line">        this.showMessage()</span><br><span class="line">        // console.log(document.getElementById(&#x27;title&#x27;).innerHTML);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 组件视图渲染之后</span><br><span class="line">    // 能访问自定义属性</span><br><span class="line">    // 能访问组件的实例this中的数据源和函数</span><br><span class="line">    // 能访问组件中的视图DOM元素</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        console.log(&#x27;mounted 组件视图渲染之前&#x27;);</span><br><span class="line">        console.log(this.$props.subtitle);</span><br><span class="line">        console.log(this.age)</span><br><span class="line">        this.showMessage()</span><br><span class="line">        console.log(document.getElementById(&#x27;title&#x27;).innerHTML);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 数据源发生改变，视图重新渲染之前</span><br><span class="line">    // 能访问自定义属性</span><br><span class="line">    // 能访问组件的实例this中的数据源和函数</span><br><span class="line">    // 能访问重新渲染的DOM元素之前的状态</span><br><span class="line">    beforeUpdate() &#123;</span><br><span class="line">        console.log(&#x27;beforeUpdate 数据源发生改变，视图重新渲染之前&#x27;);</span><br><span class="line">        console.log(this.$props.subtitle);</span><br><span class="line">        console.log(this.age)</span><br><span class="line">        this.showMessage()</span><br><span class="line">        console.log(document.getElementById(&#x27;title&#x27;).innerHTML);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 数据源发生改变，视图重新渲染之后</span><br><span class="line">    // 能访问自定义属性</span><br><span class="line">    // 能访问组件的实例this中的数据源和函数</span><br><span class="line">    // 能访问重新渲染的DOM元素之后的状态</span><br><span class="line">    updated() &#123;</span><br><span class="line">        console.log(&#x27;updated 数据源发生改变，视图重新渲染之后&#x27;);</span><br><span class="line">        console.log(this.$props.subtitle);</span><br><span class="line">        console.log(this.age)</span><br><span class="line">        this.showMessage()</span><br><span class="line">        console.log(document.getElementById(&#x27;title&#x27;).innerHTML);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 组件卸载之前</span><br><span class="line">    // 能访问自定义属性</span><br><span class="line">    // 能访问组件的实例this中的数据源和函数</span><br><span class="line">    // 能访问组件中的视图DOM元素</span><br><span class="line">    beforeUnmount() &#123;</span><br><span class="line">        console.log(&#x27;beforeUnmount 组件卸载之前&#x27;);</span><br><span class="line">        console.log(this.$props.subtitle);</span><br><span class="line">        console.log(this.age)</span><br><span class="line">        this.showMessage()</span><br><span class="line">        console.log(document.getElementById(&#x27;title&#x27;).innerHTML);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 组件已卸载</span><br><span class="line">    // 能访问自定义属性</span><br><span class="line">    // 能访问组件的实例this中的数据源和函数</span><br><span class="line">    // 不能访问组件中的视图DOM元素</span><br><span class="line">    unmounted() &#123;</span><br><span class="line">        console.log(&#x27;unmounted 组件已卸载&#x27;);</span><br><span class="line">        console.log(this.$props.subtitle);</span><br><span class="line">        console.log(this.age)</span><br><span class="line">        this.showMessage()</span><br><span class="line">        // console.log(document.getElementById(&#x27;title&#x27;).innerHTML);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h3 id=&quot;title&quot;&gt;</span><br><span class="line">        &lt;i&gt;年龄：&#123;&#123; age &#125;&#125;&lt;/i&gt;</span><br><span class="line">    &lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    &lt;button @click=&quot;(age = 70)&quot;&gt;年龄改为70&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;(age = 30)&quot;&gt;年龄改为30&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="8-2-组合式API">8.2 组合式API</h3>
<ul>
<li>因为 <code>setup</code> 是围绕 <code>beforeCreate</code> 和 <code>created</code> 生命周期钩子运行的，所以不需要显式地定义它们。换句话说，在这些钩子中编写的任何代码都应该直接在 <code>setup</code> 函数中编写。</li>
</ul>
<table>
<thead>
<tr>
<th>选项式钩子</th>
<th>组合式钩子</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>beforeCreate</code></td>
<td>无</td>
</tr>
<tr>
<td><code>created</code></td>
<td>无</td>
</tr>
<tr>
<td><code>beforeMount</code></td>
<td><code>onBeforeMount</code></td>
</tr>
<tr>
<td><code>mounted</code></td>
<td><code>onMounted</code></td>
</tr>
<tr>
<td><code>beforeUpdate</code></td>
<td><code>onBeforeUpdate</code></td>
</tr>
<tr>
<td><code>updated</code></td>
<td><code>onUpdated</code></td>
</tr>
<tr>
<td><code>beforeUmmount</code></td>
<td><code>onBeforeUnmount</code></td>
</tr>
<tr>
<td><code>unmounted</code></td>
<td><code>onUnmounted</code></td>
</tr>
</tbody>
</table>
<h2 id="9-模板引用">9 模板引用</h2>
<h3 id="9-1-访问模板引用">9.1 访问模板引用</h3>
<ul>
<li><code>ref</code></li>
</ul>
<ol>
<li>
<p>在视图元素中采用<code>ref</code>属性来设置需要访问的DOM元素</p>
<p>a. 该<code>ref</code>属性可采用字符值的执行设置<br>
b. 该<code>ref</code>属性可采用<code>v-bind: </code>或<code>:ref</code>的形式来绑定函数，其函数的第一个参数则为该元素</p>
</li>
<li>
<p>如果元素的<code>ref</code>属性值采用的是字符串形式<br>
a. 在选项式API JS中，可通过<code>this. $refs</code>来访问模板引用<br>
b. 在组合式API JS中，我们需要声明一个同名的<code>ref</code>变量，来获得该模板的引用</p>
</li>
</ol>
<h3 id="9-2-v-for中的模板引用">9.2 <code>v-for</code>中的模板引用</h3>
<blockquote>
<p>注意：需要v3.2.25及以上版本</p>
</blockquote>
<p>当在v- for中使用模板弓|用时:</p>
<ol>
<li>如果<code>ref</code>值是字符串形式，在元素被渲染后包含对应整个列表的所有元素[数组]。</li>
<li>如果<code>ref</code>值是函数形式，则会每道染一个列表元素则会执行对应的函数[不推荐使用]。</li>
</ol>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340806.png" alt="image-20230227183307056"></p>
<h3 id="9-3-组件上的ref">9.3 组件上的<code>ref</code></h3>
<p>模板引用也可以被用在一个子组件 上；这种情况下引用中获得的值是<strong>组件实例</strong>：</p>
<ol>
<li>如果子组件使用的是选项式API ,默认情况下父组件可以随意访问该子组件的数据和函数，除非在子组件使用<code>expose</code> 选项来暴露特定的数据或函数</li>
<li>如果子组件使用的是组合式API <code>&lt;script setup&gt; </code>， 那么该子组件默认是私有的，则父组件无法访问该子组件，除非子组件在其中通过<code>defineExpose</code> 宏显式暴露特定的数据或函数。</li>
</ol>
<h2 id="10-路由-Vue-Router">10 路由 <code>Vue Router</code></h2>
<ol>
<li><code>vue-router</code>是<code>vue.js</code>官方给出的路由解决方案，能够轻松的管理<code>SPA</code>项目中组件的切换。</li>
<li>安装：<code>npm install vue-router@4</code></li>
</ol>
<h3 id="10-1-快速使用">10.1 快速使用</h3>
<h4 id="10-1-1-创建路由模块">10.1.1 创建路由模块</h4>
<ol>
<li>
<p>在项目中的src文件夹中创建一个router 文件夹，在其中创建<code>index.js</code> 模块</p>
</li>
<li>
<p>采用<code>createRouter()</code>创建路由，并暴露出去</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将路由对象暴露出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在<code>main.js</code>文件中初始化路由模块<code>app. use(router)</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">// 引入路由模块</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化路由模块</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="10-1-2-规定路由模式">10.1.2 规定路由模式</h4>
<ol>
<li><code>createWebHashHistory</code>：Hash模式</li>
<li><code>createWebHistory</code>：html模式</li>
</ol>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340807.png" alt="image-20230227191302919"></p>
<h4 id="10-1-3-使用路由规则">10.1.3 使用路由规则</h4>
<p><code>routes</code>路由规则：</p>
<ul>
<li><code>path</code>：路由分配的<code>url</code></li>
<li><code>name</code>：当路由指向此页面时显示的名字</li>
<li><code>component</code>：路由调用这个页面时加载的组件</li>
</ul>
<p><code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BlogHomeView</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/BlogHomeView.vue&#x27;</span></span><br><span class="line"><span class="comment">// 路由规则</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,<span class="comment">//路由地址</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>, <span class="comment">//路由名称</span></span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&#x27;@/views/HomeVieW.vue&#x27;</span>)<span class="comment">//切换路由地址展示的组件</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/blog&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;blog&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">BlogHomeView</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(), <span class="comment">//使用history模式路由</span></span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将路由对象暴露出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<h4 id="10-1-4-声明路由链接和占位符">10.1.4 声明路由链接和占位符</h4>
<ul>
<li><code>&lt;router-link&gt;</code>：路由链接，<code>to</code>属性则为点击此元素，需要切换的路由地址。</li>
<li><code>&lt;router-view&gt;</code>：路由占位符，路由切换的视图展示的位置。</li>
</ul>
<p><code>APP.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;router-link to=&quot;/&quot;&gt;重定向到首页&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/home&quot;&gt;首页&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/blog&quot;&gt;博客&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- 路由视图占位符（切换路由时，要展示的组件的地方） --&gt;</span><br><span class="line">    &lt;router-view /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-2-重定向路由">10.2 重定向路由</h3>
<ul>
<li><code>redirect</code></li>
</ul>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340808.png" alt="image-20230227193558172"></p>
<h3 id="10-3-嵌套路由">10.3 嵌套路由</h3>
<p>嵌套路由规则</p>
<ol>
<li>在某一个路由规则中采用<code>children</code>来声明嵌套路由的规则</li>
<li>嵌套路由规则中的<code>path</code>不能以<code>/</code>开头,访问需使用<code>/father/son</code> 的形式</li>
</ol>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340809.png" alt="image-20230227195915096"></p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340810.png" alt="image-20230227195934756"></p>
<h3 id="10-4-路径参数">10.4 路径参数</h3>
<ul>
<li>语法：<code>path:'/url/:param'</code></li>
<li>在展示的组件中访问路径参数</li>
</ul>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340811.png" alt="image-20230227201140784"></p>
<p><code>BlogContentView.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;;</span><br><span class="line"></span><br><span class="line">const propsData = defineProps([&#x27;id&#x27;])</span><br><span class="line">const routeObj = useRoute()</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">        博客详情界面</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&#123;&#123; routeObj.params &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&#123;&#123; routeObj.params.id &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&#123;&#123; propsData.id &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340812.png" alt="image-20230227202236814"></p>
<h3 id="10-5-声明式和编程式导航">10.5 声明式和编程式导航</h3>
<ul>
<li>导航到不同的位置</li>
</ul>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340813.png" alt="image-20230227202351905"></p>
<ul>
<li>替换当前位置</li>
</ul>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340814.png" alt="image-20230227203231714"></p>
<ul>
<li>路由历史</li>
</ul>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340815.png" alt="image-20230227203955271"></p>
<h3 id="10-6-导航守卫">10.6 导航守卫</h3>
<h3 id="10-6-1-全局前置守卫">10.6.1 全局前置守卫</h3>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340816.png" alt="image-20230228140650241"></p>
<p><code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeView</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/HomeView.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BlogHomeView</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/BlogHomeView.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">LoginView</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/LoginView.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MainHomeView</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/admin/MainHomeView.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">UserManagerView</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/admin/UserManagerView.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 路由规则</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,<span class="comment">//路由地址</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>, <span class="comment">//路由名称</span></span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">HomeView</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/blog&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;blog&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">BlogHomeView</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">LoginView</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/admin/main&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;admin-main&#x27;</span>,</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">isLogin</span>: <span class="literal">true</span> &#125;,  <span class="comment">// 自定义meta属性</span></span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">MainHomeView</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/admin/user&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;admin-user&#x27;</span>,</span><br><span class="line">        <span class="attr">meta</span>: &#123; <span class="attr">isLogin</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">UserManagerView</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(), <span class="comment">//使用history模式路由</span></span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册全局前置守卫</span></span><br><span class="line"><span class="comment">// to: 将要访问的路由信息对象</span></span><br><span class="line"><span class="comment">// from: 将要离开的路由信息对象</span></span><br><span class="line"><span class="comment">// next:  </span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 判断将要访问的路由信息对象是否需要登录</span></span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isLogin</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> userLogin = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;loginUser&#x27;</span>)</span><br><span class="line">        <span class="comment">// 判断用户是否已经登录了</span></span><br><span class="line">        <span class="keyword">if</span> (userLogin == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//未登录，跳转至登录页</span></span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">next</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span> &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将路由对象暴露出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<p><code>LoginView.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">let user = reactive(&#123;</span><br><span class="line">    account: &#x27;&#x27;,</span><br><span class="line">    password: &#x27;&#x27;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function toLogin() &#123;</span><br><span class="line">    localStorage.setItem(&#x27;loginUser&#x27;, JSON.stringify(user))</span><br><span class="line">    alert(&#x27;登陆成功&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function loginSingout() &#123;</span><br><span class="line">    localStorage.removeItem(&#x27;loginUser&#x27;)</span><br><span class="line">    alert(&#x27;注销成功&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">function isLogined() &#123;</span><br><span class="line">    let userLogin = localStorage.getItem(&#x27;loginUser&#x27;)</span><br><span class="line">    console.log(userLogin);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;login&quot;&gt;</span><br><span class="line">        登录界面</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        账号：&lt;input type=&quot;text&quot; v-model=&quot;user.account&quot;&gt;&lt;br&gt;</span><br><span class="line">        密码：&lt;input type=&quot;password&quot; v-model=&quot;user.password&quot;&gt;&lt;br&gt;</span><br><span class="line">        &lt;button @click=&quot;toLogin&quot;&gt;登录&lt;/button&gt;|</span><br><span class="line">        &lt;button @click=&quot;loginSingout&quot;&gt;注销&lt;/button&gt;|</span><br><span class="line">        &lt;button @click=&quot;isLogined&quot;&gt;查看是否已经登录&lt;/button&gt;|</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.login &#123;</span><br><span class="line">    background-color: orange;</span><br><span class="line">    padding: 50px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-6-2-其他守卫">10.6.2 其他守卫</h3>
<p>导航守卫可分为：全局前置守卫、全局解析守卫、全局后置守卫、路由独享的守卫、组件内的守卫。</p>
<h2 id="11-状态管理库Pinia">11 状态管理库<code>Pinia</code></h2>
<blockquote>
<p><code>Pinia</code>是<code>Vue</code>的专属状态管理库，它允许你跨组件或页面共享状态。</p>
</blockquote>
<h3 id="11-1-安装和使用Pinia">11.1 安装和使用<code>Pinia</code></h3>
<ol>
<li>安装：<code>npm install pinia</code></li>
<li>使用 <code>main.js</code></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入createPinia函数</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建pinia(根存储)，并且应用到整个应用中。</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>())</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="11-2-store">11.2 <code>store</code></h3>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340817.png" alt="image-20230228144830288"></p>
<h3 id="11-3-state">11.3 <code>state</code></h3>
<h4 id="11-3-1-选项式">11.3.1 选项式</h4>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340818.png" alt="image-20230228145009745"></p>
<p><code>useUserStore.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">// 共享的数据</span></span><br><span class="line">    <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">age</span>: <span class="number">27</span>,</span><br><span class="line">        <span class="attr">level</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">account</span>: <span class="string">&#x27;SD78556&#x27;</span>,</span><br><span class="line">        <span class="attr">nickname</span>: <span class="string">&#x27;阿达&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState, mapStores, mapWritableState &#125; from &#x27;pinia&#x27;;</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;./store/useUserStore&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    computed: &#123;</span><br><span class="line">        // mapState 将store的state映射成当前组件的计算属性</span><br><span class="line">        // 具有响应式，但是是只读</span><br><span class="line">        // 字符串数组形式：不能自定义计算属性名</span><br><span class="line">        // 对象形式：可以自定义计算属性名</span><br><span class="line">        ...mapState(useUserStore, [&#x27;age&#x27;, &#x27;level&#x27;]),</span><br><span class="line">        ...mapState(useUserStore, &#123;</span><br><span class="line">            user_account: &#x27;account&#x27;,</span><br><span class="line">            user_nickname: &#x27;nickname&#x27;</span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        ...mapWritableState(useUserStore, [&#x27;account&#x27;, &#x27;nickname&#x27;])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;mapState 映射的计算属性&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; age &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; level &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; user_account &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; user_nickname &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2&gt;mapWritableState 映射的计算属性&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; account &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; nickname &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &lt;button @click=&quot;nickname += &#x27;=&#x27;&quot;&gt;更改昵称&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="11-3-2-组合式">11.3.2 组合式</h4>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340819.png" alt="image-20230228152216904"></p>
<p><code>useUserStore.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">const</span> level = <span class="title function_">ref</span>(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">const</span> account = <span class="title function_">ref</span>(<span class="string">&#x27;SD54646&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> nickname = <span class="title function_">ref</span>(<span class="string">&#x27;阿达&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; age, level, account, nickname &#125; <span class="comment">//把变量共享出去</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;@/store/useUserStore&#x27;;</span><br><span class="line">import &#123; storeToRefs &#125; from &#x27;pinia&#x27;;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">// 获取 useUserStore实例</span><br><span class="line">const user_store = useUserStore()</span><br><span class="line"></span><br><span class="line">// 通过 computed() 将 store 中 state 映射成当前组件中的计算属性，但是是只读的</span><br><span class="line">const user_age = computed(() =&gt; user_store.age)</span><br><span class="line"></span><br><span class="line">// storeToRefs 将 store 中 state 解构成组件中的数据，具有响应式，可以响应式修改</span><br><span class="line">const &#123; age, level, account, nickname &#125; = storeToRefs(user_store)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;从store 直接取state&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; user_store.age &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; user_store.level &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; user_store.account &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; user_store.nickname &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click=&quot;user_store.nickname += &#x27;=&#x27;&quot;&gt;更改昵称&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;computed 映射为计算属性&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; user_age &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;storeToRefs 解构成自己的数据&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; age &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; level &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; account &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; nickname &#125;&#125;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click=&quot;age += 10&quot;&gt;更改年龄&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="11-4-getters">11.4 <code>getters</code></h3>
<h4 id="11-4-1-选项式">11.4.1 选项式</h4>
<p><code>useUserStore.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">birthday</span>: <span class="string">&#x27;1992-12-27&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">31</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 通过计算得到的新的共享数据：只读</span></span><br><span class="line">    <span class="comment">// 如果依赖的数据发生变化，则会重新计算</span></span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">        <span class="title function_">month</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">birthday</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 参数1为store实例</span></span><br><span class="line">        <span class="attr">ageStage</span>: <span class="function"><span class="params">store</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (store.<span class="property">age</span> &lt; <span class="number">18</span>) <span class="keyword">return</span> <span class="string">&#x27;未成年&#x27;</span></span><br><span class="line">            <span class="keyword">if</span> (store.<span class="property">age</span> &lt; <span class="number">35</span>) <span class="keyword">return</span> <span class="string">&#x27;青年&#x27;</span></span><br><span class="line">            <span class="keyword">if</span> (store.<span class="property">age</span> &lt; <span class="number">50</span>) <span class="keyword">return</span> <span class="string">&#x27;中年&#x27;</span></span><br><span class="line">            <span class="keyword">if</span> (store.<span class="property">age</span> &gt;= <span class="number">50</span>) <span class="keyword">return</span> <span class="string">&#x27;老年&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;script &gt;</span><br><span class="line">import &#123; mapState, mapWritableState &#125; from &#x27;pinia&#x27;;</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;@/store/useUserStore&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    computed: &#123;</span><br><span class="line">        //从store 取getters 和取state 用法相同，都可以使用mapState</span><br><span class="line">        //具有响应式，只读</span><br><span class="line">        ...mapState(useUserStore, [&#x27;month&#x27;]),</span><br><span class="line">        ...mapState(useUserStore, &#123;</span><br><span class="line">            age_stage: &#x27;ageStage&#x27;</span><br><span class="line">        &#125;),</span><br><span class="line">        //从store 取getters 和取state 用法相同，都可以使用mapWritableState</span><br><span class="line">        //具有响应式，只读</span><br><span class="line">        ...mapWritableState(useUserStore, [&#x27;ageStage&#x27;]),</span><br><span class="line">        ...mapWritableState(useUserStore, &#123;</span><br><span class="line">            bir_month: &#x27;month&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;mapState 将getters映射为自己的计算属性&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; month &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; age_stage &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click=&quot;month += 10&quot;&gt;更改月份&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;mapWritableState 将getters映射为自己的计算属性&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; bir_month &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; ageStage &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click=&quot;bir_month += 10&quot;&gt;更改月份&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="11-4-2-组合式">11.4.2 组合式</h4>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340820.png" alt="image-20230228160223968"></p>
<p><code>useUserStore.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> birthday = <span class="title function_">ref</span>(<span class="string">&#x27;1992-12-27&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">31</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过 computed 函数声明通过计算得到的共享的数据</span></span><br><span class="line">    <span class="comment">// 如果依赖的数据发生改变，则会重新计算</span></span><br><span class="line">    <span class="keyword">const</span> month = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birthday.<span class="property">value</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> ageStage = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (age.<span class="property">value</span> &lt; <span class="number">18</span>) <span class="keyword">return</span> <span class="string">&#x27;未成年&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> (age.<span class="property">value</span> &lt; <span class="number">35</span>) <span class="keyword">return</span> <span class="string">&#x27;青年&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> (age.<span class="property">value</span> &lt; <span class="number">50</span>) <span class="keyword">return</span> <span class="string">&#x27;中年&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> (age.<span class="property">value</span> &gt;= <span class="number">50</span>) <span class="keyword">return</span> <span class="string">&#x27;老年&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; birthday, age, month, ageStage &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;@/store/useUserStore&#x27;;</span><br><span class="line">import &#123; storeToRefs &#125; from &#x27;pinia&#x27;;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">// 获取 store 实例，可直接访问 getters，只读</span><br><span class="line">const user_store = useUserStore()</span><br><span class="line"></span><br><span class="line">// 通过 computed 函数将 getters 映射为自己的计算属性</span><br><span class="line">// 具有响应式，只读</span><br><span class="line">const bir_month = computed(() =&gt; user_store.month)</span><br><span class="line">const age_stage = computed(() =&gt; user_store.ageStage)</span><br><span class="line"></span><br><span class="line">// 通过 storeToRefs 函数将 getters 解构为自己的计算属性</span><br><span class="line">// 具有响应式，只读</span><br><span class="line">const &#123; month, ageStage: userAgeStage &#125; = storeToRefs(user_store)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;通过 store 直接获取 getters&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; user_store.month &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; user_store.ageStage &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click=&quot;user_store.month += 10&quot;&gt;更改月份&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;通过 computed 函数将 getters 映射为自己的计算属性&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; bir_month &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; age_stage &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click=&quot;bir_month += 10&quot;&gt;更改月份&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;通过 storeToRefs 函数将 getters 解构为自己的计算属性&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; month &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; userAgeStage &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click=&quot;month += 10&quot;&gt;更改月份&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="11-5-actions">11.5 <code>actions</code></h3>
<blockquote>
<p><code>actions</code>一般是对<code>state</code>中的数据进行修改的业务逻辑函数</p>
</blockquote>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340821.png" alt="image-20230228162609022"></p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340822.png" alt="image-20230228163146992"></p>
<p>组合式示例</p>
<p><code>useUserStore.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> nickname = <span class="title function_">ref</span>(<span class="string">&#x27;阿达&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 声明函数，并且 return 出去即可</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">setUserInfo</span>(<span class="params">user_nickname, user_age</span>) &#123;</span><br><span class="line">        nickname.<span class="property">value</span> = user_nickname</span><br><span class="line">        age.<span class="property">value</span> = user_age</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">setUserInfoByObject</span>(<span class="params">user</span>) &#123;</span><br><span class="line">        nickname.<span class="property">value</span> = user.<span class="property">nickname</span></span><br><span class="line">        age.<span class="property">value</span> = user.<span class="property">age</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; nickname, age, setUserInfo, setUserInfoByObject &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>App.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;@/store/useUserStore&#x27;;</span><br><span class="line">import &#123; storeToRefs &#125; from &#x27;pinia&#x27;;</span><br><span class="line"></span><br><span class="line">// 获取 store 实例</span><br><span class="line">const user_store = useUserStore()</span><br><span class="line"></span><br><span class="line">const &#123; nickname, age &#125; = storeToRefs(user_store)</span><br><span class="line"></span><br><span class="line">// 将 store 中的 actions 解构成自己的函数（可自定义函数名），不使用storeToRefs</span><br><span class="line">const &#123; setUserInfo, setUserInfoByObject: set_user_info_object &#125; = user_store</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; nickname &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;&#123; age &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;span&gt;通过 store 直接调用 actions&lt;/span&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;user_store.setUserInfo(&#x27;Jack&#x27;, 30)&quot;&gt;改变用户信息&lt;/button&gt;|</span><br><span class="line">    &lt;button @click=&quot;user_store.setUserInfoByObject(&#123; nickname: &#x27;Tom&#x27;, age: 40 &#125;)&quot;&gt;改变用户信息&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;span&gt;将 store 中的 actions 解构成自己的函数&lt;/span&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;setUserInfo(&#x27;Jack&#x27;, 30)&quot;&gt;改变用户信息&lt;/button&gt;|</span><br><span class="line">    &lt;button @click=&quot;set_user_info_object(&#123; nickname: &#x27;Tom&#x27;, age: 40 &#125;)&quot;&gt;改变用户信息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="12-请求库-Axios">12 请求库 <code>Axios</code></h2>
<blockquote>
<ul>
<li><code>Axios</code>是一个基于<code>promise</code>网络请求库，作用于<code>node. js</code>和浏览器中。</li>
<li><code>Axios</code>在服务端它使用原生<code>node.js</code> <code>http</code> 模块，而在客户端(浏览端)则使用<code>XMLHttpRequests</code>。</li>
<li><code>Axios</code>可以拦截请求和响应、转换请求和响应数据、取消请求、自动转换 <code>JSON</code>数据。</li>
<li><code>Axios</code>安装方式:<code>npm install axios</code>。</li>
</ul>
</blockquote>
<h3 id="12-1-Axios配置项">12.1 <code>Axios</code>配置项</h3>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340823.png" alt="image-20230301151022973"></p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340824.png" alt="image-20230301155823626"></p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340825.png" alt="image-20230301155944486"></p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340826.png" alt="image-20230301160022466"></p>
<p><img src="https://picture-cloud-storage-bed.oss-cn-chengdu.aliyuncs.com/images/202303031340827.png" alt="image-20230301160044523"></p>
<h2 id="13-购物车案例">13 购物车案例</h2>
<ol>
<li><code>App.vue</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; computed, isMemoSame, ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">import ProductVue from &#x27;./components/Product.vue&#x27;</span><br><span class="line">import Collectvue from &#x27;./components/Collect.vue&#x27;</span><br><span class="line"></span><br><span class="line">//购物车</span><br><span class="line">let shopCar = ref([</span><br><span class="line">    &#123;</span><br><span class="line">        id: 89,</span><br><span class="line">        title: &#x27;妈妈壹选 绿劲餐具净柚子金桔1.28kg*2实惠装 食品用 快速去油&#x27;,</span><br><span class="line">        subTitle: &#x27;专业消毒99.999%，威露士消毒液5件套，立减10元，买即送价值139元京东洗衣服务（衣鞋三件任选）限时限量抢，(此商品不参加上述活动)查看&gt;&#x27;,</span><br><span class="line">        image: &#x27;https://img13.360buyimg.com/n1/jfs/t1/26824/37/18309/308382/62f0b4f4E066881df/d7896be9c2410804.jpg&#x27;,</span><br><span class="line">        price: 19,</span><br><span class="line">        count: 1,</span><br><span class="line">        selected: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        id: 90,</span><br><span class="line">        title: &#x27;beats Beats Studio Buds 真无线降噪耳机 蓝牙耳机 兼容苹果安卓系统 IPX4级防水 – 白色&#x27;,</span><br><span class="line">        subTitle: &#x27;【亦静亦噪】TWS运动蓝牙降噪耳机,苹果/安卓手机适用.IPX4级防水.更多精彩&#x27;,</span><br><span class="line">        image: &#x27;https://img12.360buyimg.com/n1/s450x450_jfs/t1/103497/21/35946/39394/63f2c786F3e725d90/4f009f1b0653bab7.jpg&#x27;,</span><br><span class="line">        price: 749,</span><br><span class="line">        count: 2,</span><br><span class="line">        selected: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        id: 91,</span><br><span class="line">        title: &#x27;SANC 电脑显示器24英寸IPS全高清75Hz 低蓝光 广视角 可壁挂LED液晶屏幕N500 3代 24英寸全高清&#x27;,</span><br><span class="line">        subTitle: &#x27;升级IPS带鱼屏，办公影音生产力，性价比之选H20e点击了解点击了解&#x27;,</span><br><span class="line">        image: &#x27;https://img10.360buyimg.com/n1/s450x450_jfs/t1/42187/38/22010/77054/639c3649E1ef39f46/8e23f6f0c82db07d.jpg&#x27;,</span><br><span class="line">        price: 439,</span><br><span class="line">        count: 3,</span><br><span class="line">        selected: true</span><br><span class="line">    &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">//产品状态发生改变</span><br><span class="line">function changeShopCarProductChecked(checked, id) &#123;</span><br><span class="line">    // 循环购物车中的每个产品</span><br><span class="line">    shopCar.value.some(product =&gt; &#123;</span><br><span class="line">        //判断更改的是哪一个产品的checked状态</span><br><span class="line">        if (id === product.id) &#123;</span><br><span class="line">            product.selected = checked</span><br><span class="line">            return true //结束循环</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//产品数量发生改变</span><br><span class="line">function changeShopCarProductCount(count, id) &#123;</span><br><span class="line">    // 循环购物车中的每个产品</span><br><span class="line">    shopCar.value.some(product =&gt; &#123;</span><br><span class="line">        //判断更改的是哪一个产品的count</span><br><span class="line">        if (id === product.id) &#123;</span><br><span class="line">            product.count += count</span><br><span class="line">            return true //结束循环</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//是否全选</span><br><span class="line">let isFullselectedProduct = computed(() =&gt; &#123;</span><br><span class="line">    return shopCar.value.every(product =&gt; product.selected)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//改变购物车所有产品的选中状态</span><br><span class="line">function changeShopCarAllProductChecked(checked) &#123;</span><br><span class="line">    shopCar.value.forEach(product =&gt; &#123; product.selected = checked &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//总金额</span><br><span class="line">let total = computed(() =&gt; &#123;</span><br><span class="line">    return shopCar.value</span><br><span class="line">        .filter(item =&gt; item.selected)//过滤掉被选中的产品</span><br><span class="line">        .reduce((money, item) =&gt; (money += item.price * item.count), 0)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//购买数量</span><br><span class="line">let countSum = computed(() =&gt; &#123;</span><br><span class="line">    return shopCar.value</span><br><span class="line">        .filter(item =&gt; item.selected)</span><br><span class="line">        .reduce((count, item) =&gt; (count += item.count), 0)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;ProductVue v-for=&quot;product in shopCar&quot; :key=&quot;product.id&quot; :id=&quot;product.id&quot; :picture=&quot;product.image&quot;</span><br><span class="line">        :title=&quot;product.title&quot; :subtitle=&quot;product.subTitle&quot; :price=&quot;product.price&quot; :count=&quot;product.count&quot;</span><br><span class="line">        :is-checked=&quot;product.selected&quot; @change-product-checked=&quot;changeShopCarProductChecked&quot;</span><br><span class="line">        @change-product-count=&quot;changeShopCarProductCount&quot; /&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;!-- 使用汇总组件 --&gt;</span><br><span class="line">    &lt;Collectvue :is-all-checked=&quot;isFullselectedProduct&quot; @change-all-checked-state=&quot;changeShopCarAllProductChecked&quot;</span><br><span class="line">        :all-money=&quot;total&quot; :all-count=&quot;countSum&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">* &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><code>Product.vue</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">//声明组件的自定义属性</span><br><span class="line">let propsData = defineProps(&#123;</span><br><span class="line">    id: &#123; type: Number, required: true &#125;,</span><br><span class="line">    isChecked: Boolean,</span><br><span class="line">    picture: &#123; type: String, required: true &#125;,</span><br><span class="line">    title: &#123; type: String, required: true &#125;,</span><br><span class="line">    subtitle: &#123; type: String, required: true &#125;,</span><br><span class="line">    price: &#123; type: Number, default: 0 &#125;,</span><br><span class="line">    count: &#123; type: Number, default: 0 &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//自定义事件</span><br><span class="line">let emits = defineEmits([&#x27;changeProductChecked&#x27;, &#x27;changeProductCount&#x27;])</span><br><span class="line"></span><br><span class="line">//改变选中状态</span><br><span class="line">function changeCheckedState(e) &#123;</span><br><span class="line">    let newCheckedState = e.target.checked //复选框最新状态</span><br><span class="line">    emits(&#x27;changeProductChecked&#x27;, newCheckedState, propsData.id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!-- 产品容器 --&gt;</span><br><span class="line">    &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">        &lt;!-- 选项框 --&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; class=&quot;p_checkbox&quot; :checked=&quot;isChecked&quot; @change=&quot;changeCheckedState&quot;&gt;</span><br><span class="line">        &lt;!-- 产品图 --&gt;</span><br><span class="line">        &lt;img :src=&quot;picture&quot; class=&quot;p_image&quot;&gt;</span><br><span class="line">        &lt;!-- 产品内容 --&gt;</span><br><span class="line">        &lt;div class=&quot;p_content&quot;&gt;</span><br><span class="line">            &lt;h3 class=&quot;p_title&quot; v-text=&quot;title&quot;&gt;&lt;/h3&gt;</span><br><span class="line">            &lt;span class=&quot;p_subtitle&quot; v-text=&quot;subtitle&quot;&gt;&lt;/span&gt;</span><br><span class="line">            &lt;h2 class=&quot;p_price&quot;&gt;￥&#123;&#123; price &#125;&#125;&lt;/h2&gt;</span><br><span class="line">            &lt;!-- 产品数量区域 --&gt;</span><br><span class="line">            &lt;div class=&quot;p_count_area&quot;&gt;</span><br><span class="line">                &lt;button :disabled=&quot;count &lt;= 1&quot; @click=&quot;emits(&#x27;changeProductCount&#x27;, -1, id)&quot;&gt;-&lt;/button&gt;</span><br><span class="line">                &lt;span v-text=&quot;count&quot;&gt;&lt;/span&gt;</span><br><span class="line">                &lt;button @click=&quot;emits(&#x27;changeProductCount&#x27;, 1, id)&quot;&gt;+&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.box &#123;</span><br><span class="line">    box-shadow: 0 0 8px gray;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    margin: 15px;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.p_checkbox &#123;</span><br><span class="line">    width: 25px;</span><br><span class="line">    height: 25px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.p_image &#123;</span><br><span class="line">    width: 120px;</span><br><span class="line">    height: 120px;</span><br><span class="line">    margin: 0 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.p_content &#123;</span><br><span class="line">    align-self: start;</span><br><span class="line">    position: relative;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.p_title &#123;</span><br><span class="line">    margin-bottom: 8px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.p_subtitle &#123;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    color: gray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.p_price &#123;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">    color: rgb(225, 58, 58);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.p_count_area &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    right: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.p_count_area button &#123;</span><br><span class="line">    width: 25px;</span><br><span class="line">    height: 25px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.p_count_area span &#123;</span><br><span class="line">    margin: 0 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><code>Collect.vue</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line">defineProps(&#123;</span><br><span class="line">    isAllChecked: Boolean,</span><br><span class="line">    allMoney: &#123;</span><br><span class="line">        type: Number,</span><br><span class="line">        default: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    allCount: &#123;</span><br><span class="line">        type: Number,</span><br><span class="line">        default: 0</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//自定义事件</span><br><span class="line">let emits = defineEmits([&#x27;changeAllCheckedState&#x27;])</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;label&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; :checked=&quot;isAllChecked&quot; @change=&quot;emits(&#x27;changeAllCheckedState&#x27;, $event.target.checked)&quot;&gt;</span><br><span class="line">            全选</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">        &lt;span&gt;</span><br><span class="line">            合计金额：&lt;strong&gt;￥&#123;&#123; allMoney &#125;&#125;&lt;/strong&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line"></span><br><span class="line">        &lt;button&gt;结算【&#123;&#123; allCount &#125;&#125;】&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    margin: auto 15px;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.container input &#123;</span><br><span class="line">    width: 25px;</span><br><span class="line">    height: 25px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.container label &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    width: 70px;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.container strong &#123;</span><br><span class="line">    color: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.container button &#123;</span><br><span class="line">    border: none;</span><br><span class="line">    padding: 15px 25px;</span><br><span class="line">    background-color: rgb(50, 140, 192);</span><br><span class="line">    color: white;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    box-shadow: 0 0 5px gray;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://GageLv.github.io/hexo-blog">JoeGoodyLv</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://gagelv.github.io/hexo-blog/2023/03/03/Vue/">https://gagelv.github.io/hexo-blog/2023/03/03/Vue/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://GageLv.github.io/hexo-blog" target="_blank">JoeGoodyLv</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/hexo-blog/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="post-meta__tags" href="/hexo-blog/tags/Vue/">Vue</a></div><div class="post_share"><div class="social-share" data-image="https://w.wallhaven.cc/full/ex/wallhaven-ex3ozw.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/hexo-blog/2023/03/03/MySQL/"><img class="prev-cover" src="https://w.wallhaven.cc/full/5g/wallhaven-5gzdr5.png" onerror="onerror=null;src='/hexo-blog/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">MySQL</div></div></a></div><div class="next-post pull-right"><a href="/hexo-blog/2022/12/25/%E7%A0%94%E7%A9%B6%E7%94%9F%E8%A6%81%E6%98%8E%E7%A1%AE%E7%9A%8450%E4%BB%B6%E4%BA%8B/"><img class="next-cover" src="https://w.wallhaven.cc/full/d6/wallhaven-d6gqjj.png" onerror="onerror=null;src='/hexo-blog/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">研究生要明确的50件事</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Vue3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">1 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-MVVM%EF%BC%88Model%EF%BC%8CView%EF%BC%8CViewModel%EF%BC%89"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 MVVM（Model，View，ViewModel）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.2.</span> <span class="toc-text">2 创建单页面应用程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.</span> <span class="toc-text">3 响应式数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E9%80%89%E9%A1%B9%E5%BC%8FAPI%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 选项式API的响应式数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%BB%84%E5%90%88%E5%BC%8FAPI%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 组合式API的响应式数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-reactive-%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">3.2.1 reactive()函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-ref-%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">3.2.2 ref()函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95"><span class="toc-number">1.4.</span> <span class="toc-text">4 模板语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%86%85%E5%AE%B9%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 内容渲染指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-1-v-text"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">4.1.1 v-text</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-2-v-html"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">4.1.2 v-html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-3-swig%EF%BF%BC64-%E6%8F%92%E5%80%BC%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">4.1.3 {{}}插值表达式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 双向绑定指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-v-model"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">4.2.1 v-model</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-v-model%E7%9A%84%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">4.2.2 v-model的修饰符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 属性绑定指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AA%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">4.3.1 动态绑定多个属性值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-%E7%BB%91%E5%AE%9Aclass%E5%92%8Cstyle%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">4.3.2 绑定class和style属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 条件渲染指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-1-v-if-v-else-if-v-else"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">4.4.1 v-if, v-else-if,v-else</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-v-show"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">4.4.2 v-show</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.5.</span> <span class="toc-text">4.5 事件绑定指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-1-%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">1.4.5.1.</span> <span class="toc-text">4.5.1 事件修饰符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-2-%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">1.4.5.2.</span> <span class="toc-text">4.5.2 按键修饰符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-3-%E9%BC%A0%E6%A0%87%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">1.4.5.3.</span> <span class="toc-text">4.5.3 鼠标按键修饰符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.6.</span> <span class="toc-text">4.6 列表渲染指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-1-v-for%E6%B8%B2%E6%9F%93%E6%95%B0%E7%BB%84"><span class="toc-number">1.4.6.1.</span> <span class="toc-text">4.6.1 v-for渲染数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-2-v-for%E6%B8%B2%E6%9F%93%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.6.2.</span> <span class="toc-text">4.6.2 v-for渲染对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-3-%E9%80%9A%E8%BF%87key%E7%AE%A1%E7%90%86%E7%8A%B6%E6%80%81"><span class="toc-number">1.4.6.3.</span> <span class="toc-text">4.6.3 通过key管理状态</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">1.5.</span> <span class="toc-text">5 侦听器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E9%80%89%E9%A1%B9%E5%BC%8FAPI%E4%B8%AD%E7%9A%84%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 选项式API中的侦听器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-%E5%87%BD%E6%95%B0%E5%BC%8F%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">5.1.1 函数式侦听器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-%E5%AF%B9%E8%B1%A1%E5%BC%8F%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">5.1.2 对象式侦听器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-3-this-watch%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">5.1.3 this.$watch侦听器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E7%BB%84%E5%90%88%E5%BC%8FAPI%E4%B8%AD%E7%9A%84%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 组合式API中的侦听器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-watch-%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">5.2.1 watch()函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-watchEffect-%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">5.2.2 watchEffect()函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">1.6.</span> <span class="toc-text">6 计算属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%BB%84%E4%BB%B6"><span class="toc-number">1.7.</span> <span class="toc-text">7 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 注册组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-1-%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">7.1.1 全局注册</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-2-%E5%B1%80%E9%83%A8%E6%B3%A8%E5%86%8C"><span class="toc-number">1.7.1.2.</span> <span class="toc-text">7.1.2 局部注册</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%EF%BC%88%E7%88%B6-%E5%AD%90%EF%BC%89"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 传递数据（父-&gt;子）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%EF%BC%88%E5%AD%90-%E7%88%B6%EF%BC%89"><span class="toc-number">1.7.3.</span> <span class="toc-text">7.3 传递数据（子-&gt;父）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-1-%E3%80%90%E5%AD%90%E7%BB%84%E4%BB%B6%E3%80%91%E5%A3%B0%E6%98%8E%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">7.3.1 【子组件】声明组件事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-2-%E3%80%90%E5%AD%90%E7%BB%84%E4%BB%B6%E3%80%91%E8%A7%A6%E5%8F%91%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.7.3.2.</span> <span class="toc-text">7.3.2 【子组件】触发组件事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-3%E3%80%90%E7%88%B6%E7%BB%84%E4%BB%B6%E3%80%91%E7%9B%91%E5%90%AC%E5%AD%90%E7%BB%84%E4%BB%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.7.3.3.</span> <span class="toc-text">7.3.3【父组件】监听子组件自定义事件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E9%80%8F%E4%BC%A0%E5%B1%9E%E6%80%A7%E5%92%8C%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.7.4.</span> <span class="toc-text">7.4 透传属性和事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-%E6%8F%92%E6%A7%BD"><span class="toc-number">1.7.5.</span> <span class="toc-text">7.5 插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6CSS%E5%8A%9F%E8%83%BD"><span class="toc-number">1.7.6.</span> <span class="toc-text">7.6 单文件组件CSS功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6-1-%E7%BB%84%E4%BB%B6%E4%BD%9C%E7%94%A8%E5%9F%9Fscoped"><span class="toc-number">1.7.6.1.</span> <span class="toc-text">7.6.1 组件作用域scoped</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6-2-%E6%B7%B1%E5%BA%A6%E9%80%89%E6%8B%A9%E5%99%A8%EF%BC%9A-deep"><span class="toc-number">1.7.6.2.</span> <span class="toc-text">7.6.2 深度选择器：:deep()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6-3-CSS%E4%B8%AD%E7%9A%84v-bind"><span class="toc-number">1.7.6.3.</span> <span class="toc-text">7.6.3 CSS中的v-bind()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5"><span class="toc-number">1.7.7.</span> <span class="toc-text">7.7 依赖注入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.8.</span> <span class="toc-text">8 生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E9%80%89%E9%A1%B9%E5%BC%8FAPI"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1 选项式API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E7%BB%84%E5%90%88%E5%BC%8FAPI"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2 组合式API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E6%A8%A1%E6%9D%BF%E5%BC%95%E7%94%A8"><span class="toc-number">1.9.</span> <span class="toc-text">9 模板引用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E8%AE%BF%E9%97%AE%E6%A8%A1%E6%9D%BF%E5%BC%95%E7%94%A8"><span class="toc-number">1.9.1.</span> <span class="toc-text">9.1 访问模板引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-v-for%E4%B8%AD%E7%9A%84%E6%A8%A1%E6%9D%BF%E5%BC%95%E7%94%A8"><span class="toc-number">1.9.2.</span> <span class="toc-text">9.2 v-for中的模板引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E7%BB%84%E4%BB%B6%E4%B8%8A%E7%9A%84ref"><span class="toc-number">1.9.3.</span> <span class="toc-text">9.3 组件上的ref</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E8%B7%AF%E7%94%B1-Vue-Router"><span class="toc-number">1.10.</span> <span class="toc-text">10 路由 Vue Router</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E5%BF%AB%E9%80%9F%E4%BD%BF%E7%94%A8"><span class="toc-number">1.10.1.</span> <span class="toc-text">10.1 快速使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-1-%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%9D%97"><span class="toc-number">1.10.1.1.</span> <span class="toc-text">10.1.1 创建路由模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-2-%E8%A7%84%E5%AE%9A%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.10.1.2.</span> <span class="toc-text">10.1.2 规定路由模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-%E4%BD%BF%E7%94%A8%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99"><span class="toc-number">1.10.1.3.</span> <span class="toc-text">10.1.3 使用路由规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-4-%E5%A3%B0%E6%98%8E%E8%B7%AF%E7%94%B1%E9%93%BE%E6%8E%A5%E5%92%8C%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">1.10.1.4.</span> <span class="toc-text">10.1.4 声明路由链接和占位符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E9%87%8D%E5%AE%9A%E5%90%91%E8%B7%AF%E7%94%B1"><span class="toc-number">1.10.2.</span> <span class="toc-text">10.2 重定向路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1"><span class="toc-number">1.10.3.</span> <span class="toc-text">10.3 嵌套路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E8%B7%AF%E5%BE%84%E5%8F%82%E6%95%B0"><span class="toc-number">1.10.4.</span> <span class="toc-text">10.4 路径参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%92%8C%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">1.10.5.</span> <span class="toc-text">10.5 声明式和编程式导航</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB"><span class="toc-number">1.10.6.</span> <span class="toc-text">10.6 导航守卫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-1-%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB"><span class="toc-number">1.10.7.</span> <span class="toc-text">10.6.1 全局前置守卫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-2-%E5%85%B6%E4%BB%96%E5%AE%88%E5%8D%AB"><span class="toc-number">1.10.8.</span> <span class="toc-text">10.6.2 其他守卫</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93Pinia"><span class="toc-number">1.11.</span> <span class="toc-text">11 状态管理库Pinia</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8Pinia"><span class="toc-number">1.11.1.</span> <span class="toc-text">11.1 安装和使用Pinia</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-store"><span class="toc-number">1.11.2.</span> <span class="toc-text">11.2 store</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-state"><span class="toc-number">1.11.3.</span> <span class="toc-text">11.3 state</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-3-1-%E9%80%89%E9%A1%B9%E5%BC%8F"><span class="toc-number">1.11.3.1.</span> <span class="toc-text">11.3.1 选项式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-3-2-%E7%BB%84%E5%90%88%E5%BC%8F"><span class="toc-number">1.11.3.2.</span> <span class="toc-text">11.3.2 组合式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-getters"><span class="toc-number">1.11.4.</span> <span class="toc-text">11.4 getters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-4-1-%E9%80%89%E9%A1%B9%E5%BC%8F"><span class="toc-number">1.11.4.1.</span> <span class="toc-text">11.4.1 选项式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-4-2-%E7%BB%84%E5%90%88%E5%BC%8F"><span class="toc-number">1.11.4.2.</span> <span class="toc-text">11.4.2 组合式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-actions"><span class="toc-number">1.11.5.</span> <span class="toc-text">11.5 actions</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E8%AF%B7%E6%B1%82%E5%BA%93-Axios"><span class="toc-number">1.12.</span> <span class="toc-text">12 请求库 Axios</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-Axios%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">1.12.1.</span> <span class="toc-text">12.1 Axios配置项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A1%88%E4%BE%8B"><span class="toc-number">1.13.</span> <span class="toc-text">13 购物车案例</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By JoeGoodyLv</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/hexo-blog/js/utils.js"></script><script src="/hexo-blog/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/hexo-blog/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>